"use strict";(()=>{var e={};e.id=6495,e.ids=[6495],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},45596:(e,t,s)=>{s.r(t),s.d(t,{originalPathname:()=>l,patchFetch:()=>f,requestAsyncStorage:()=>p,routeModule:()=>d,serverHooks:()=>m,staticGenerationAsyncStorage:()=>h});var r={};s.r(r),s.d(r,{POST:()=>c});var a=s(49303),n=s(88716),i=s(60670),o=s(87070),u=s(21762);async function c(e){try{let e=process.env.BITSAFIRA_TOKEN;if(!e)return o.NextResponse.json({success:!1,message:"Token da BitSafira n\xe3o configurado."},{status:400});let t=(0,u.q)(e),s=await t.listInstances();if(200===s.status)return o.NextResponse.json({success:!0,message:"Token BitSafira v\xe1lido.",data:s.dados},{status:200});return o.NextResponse.json({success:!1,message:s.mensagem||"Token BitSafira inv\xe1lido ou expirado."},{status:s.status||401})}catch(e){return console.error("Erro na API /api/bitsafira/auth:",e),o.NextResponse.json({success:!1,message:"Erro interno no servidor.",error:e.message||"Erro desconhecido."},{status:500})}}let d=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/bitsafira/auth/route",pathname:"/api/bitsafira/auth",filename:"route",bundlePath:"app/api/bitsafira/auth/route"},resolvedPagePath:"/var/www/barberflow/src/app/api/bitsafira/auth/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:p,staticGenerationAsyncStorage:h,serverHooks:m}=d,l="/api/bitsafira/auth/route";function f(){return(0,i.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:h})}},21762:(e,t,s)=>{s.d(t,{q:()=>a});class r{constructor(e){this.token=e.token,this.baseUrl=e.baseUrl||"https://api.bitsafira.com.br"}async request(e,t,s){let r={method:e,headers:{"Content-Type":"application/json",Token:this.token},redirect:"follow"};s&&(r.body=JSON.stringify(s));try{let e=await fetch(`${this.baseUrl}${t}`,r),s=await e.json();return{status:e.status,message:s.message||s.mensagem,mensagem:s.mensagem,error:s.error,dados:s.dados||s}}catch(s){return console.error(`BitSafira API Error [${e} ${t}]:`,s),{status:500,message:"Erro de comunica\xe7\xe3o com a API BitSafira.",error:s.message}}}async authenticate(e){return this.request("POST","/auth",e)}async listInstances(){return this.request("GET","/instancias")}async getInstanceInfo(e){return this.request("GET",`/instancia/info?id=${encodeURIComponent(e)}`)}async createInstance(e){return this.request("POST","/instancia/salvar",e)}async deleteInstance(e){return this.request("DELETE","/instancia/deletar",e)}async connectInstance(e){return this.request("POST","/instancia/conectar",e)}async disconnectInstance(e){return this.request("POST","/instancia/desconectar",e)}async sendMessage(e){let t=await this.request("POST","/disparo/enviar",e);if(404!==t.status)return t;let s=await this.request("POST","/mensagem/disparar",e);return 404!==s.status?s:this.request("POST","/mensagem/enviar",e)}async verifyNumber(e){return this.request("POST","/numero/verificar",e)}}function a(e){let t=e||process.env.BITSAFIRA_TOKEN,s=process.env.BITSAFIRA_BASE_URL;if(!t)throw Error("BITSAFIRA_TOKEN is not defined in environment variables or provided.");return new r({token:t,baseUrl:s})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[8948,5972],()=>s(45596));module.exports=r})();
"use strict";(()=>{var e={};e.id=84,e.ids=[84],e.modules={53524:e=>{e.exports=require("@prisma/client")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},84770:e=>{e.exports=require("crypto")},73856:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>w,patchFetch:()=>h,requestAsyncStorage:()=>v,routeModule:()=>d,serverHooks:()=>m,staticGenerationAsyncStorage:()=>l});var i={};t.r(i),t.d(i,{GET:()=>u,POST:()=>p});var a=t(49303),s=t(88716),o=t(60670),n=t(87070),c=t(18265);async function u(e){try{let{searchParams:r}=new URL(e.url),t=r.get("barbershopId");if(!t)return n.NextResponse.json({error:"barbershopId \xe9 obrigat\xf3rio"},{status:400});let i=await (0,c.o3)(t);return n.NextResponse.json({data:i})}catch(e){return console.error("GET /api/services error:",e),n.NextResponse.json({error:"Erro ao listar servi\xe7os"},{status:500})}}async function p(e){try{let{barbershopId:r,...t}=await e.json();if(!r)return n.NextResponse.json({error:"barbershopId \xe9 obrigat\xf3rio"},{status:400});let i=await (0,c.G6)(r,t);return n.NextResponse.json({data:i},{status:201})}catch(e){return console.error("POST /api/services error:",e),n.NextResponse.json({error:"Erro ao criar servi\xe7o"},{status:500})}}let d=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/services/route",pathname:"/api/services",filename:"route",bundlePath:"app/api/services/route"},resolvedPagePath:"/var/www/barberflow/src/app/api/services/route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:v,staticGenerationAsyncStorage:l,serverHooks:m}=d,w="/api/services/route";function h(){return(0,o.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:l})}},63841:(e,r,t)=>{t.d(r,{Z:()=>a});var i=t(53524);let a=globalThis.prisma??new i.PrismaClient({log:["error"]})},18265:(e,r,t)=>{t.d(r,{G6:()=>c,Pg:()=>u,o3:()=>n,wo:()=>p});var i=t(53524),a=t(84770),s=t(63841);function o(e){return{id:e.id,barbershopId:e.barbershopId,name:e.name,description:e.description??void 0,duration:e.durationMinutes,price:Number(e.price),active:e.active}}async function n(e){return(await s.Z.service.findMany({where:{barbershopId:e},orderBy:{name:"asc"}})).map(o)}async function c(e,r){return o(await s.Z.service.create({data:{id:(0,a.randomUUID)(),barbershopId:e,name:r.name,description:r.description,durationMinutes:r.duration,price:new i.Prisma.Decimal(r.price),active:r.active??!0}}))}async function u(e,r){return o(await s.Z.service.update({where:{id:e},data:{name:r.name,description:r.description,durationMinutes:r.duration,price:void 0!==r.price?new i.Prisma.Decimal(r.price):void 0,active:r.active}}))}async function p(e){await s.Z.service.delete({where:{id:e}})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),i=r.X(0,[8948,5972],()=>t(73856));module.exports=i})();
"use strict";(()=>{var e={};e.id=7031,e.ids=[7031],e.modules={53524:e=>{e.exports=require("@prisma/client")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},84770:e=>{e.exports=require("crypto")},9158:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>y,patchFetch:()=>v,requestAsyncStorage:()=>l,routeModule:()=>c,serverHooks:()=>m,staticGenerationAsyncStorage:()=>x});var a={};t.r(a),t.d(a,{DELETE:()=>d,PATCH:()=>u});var n=t(49303),s=t(88716),o=t(60670),i=t(87070),p=t(52801);async function u(e,{params:r}){try{let{description:t,category:a,type:n,amount:s,date:o}=await e.json()??{},u=function(e){if(null!=e){if("number"==typeof e)return e;if("string"==typeof e){let r=e.replace(/\D/g,"");if(!r)return;return Number(r)/100}}}(s);if(void 0!==s&&!Number.isFinite(u??NaN))return i.NextResponse.json({error:"Valor inv\xe1lido"},{status:400});let d=o?new Date(o):void 0;if(void 0!==o&&d&&Number.isNaN(d.getTime()))return i.NextResponse.json({error:"Data inv\xe1lida"},{status:400});let c=await (0,p.E)(r.id,{description:t,category:a,type:n,amount:u,date:d});return i.NextResponse.json({data:c})}catch(e){return console.error("PATCH /api/expenses/:id error:",e),i.NextResponse.json({error:"Erro ao atualizar despesa"},{status:500})}}async function d(e,{params:r}){try{return await (0,p.vu)(r.id),i.NextResponse.json({success:!0})}catch(e){return console.error("DELETE /api/expenses/:id error:",e),i.NextResponse.json({error:"Erro ao remover despesa"},{status:500})}}let c=new n.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/expenses/[id]/route",pathname:"/api/expenses/[id]",filename:"route",bundlePath:"app/api/expenses/[id]/route"},resolvedPagePath:"/var/www/barberflow/src/app/api/expenses/[id]/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:l,staticGenerationAsyncStorage:x,serverHooks:m}=c,y="/api/expenses/[id]/route";function v(){return(0,o.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:x})}},63841:(e,r,t)=>{t.d(r,{Z:()=>n});var a=t(53524);let n=globalThis.prisma??new a.PrismaClient({log:["error"]})},52801:(e,r,t)=>{t.d(r,{E:()=>u,Fl:()=>p,OW:()=>i,vu:()=>d});var a=t(53524),n=t(84770),s=t(63841);function o(e){return{id:e.id,barbershopId:e.barbershopId,description:e.description??"",category:e.category||"Outros",type:e.expenseType||"Vari\xe1vel",amount:Number(e.amount),date:e.expenseDate}}async function i(e){return(await s.Z.expense.findMany({where:{barbershopId:e},orderBy:{expenseDate:"desc"}})).map(o)}async function p(e){return o(await s.Z.expense.create({data:{id:(0,n.randomUUID)(),barbershopId:e.barbershopId,description:e.description,category:e.category,expenseType:e.type,amount:new a.Prisma.Decimal(e.amount),expenseDate:e.date,title:e.description}}))}async function u(e,r){return o(await s.Z.expense.update({where:{id:e},data:{description:r.description,title:r.description,category:r.category,expenseType:r.type,amount:void 0!==r.amount?new a.Prisma.Decimal(r.amount):void 0,expenseDate:r.date}}))}async function d(e){await s.Z.expense.delete({where:{id:e}})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[8948,5972],()=>t(9158));module.exports=a})();
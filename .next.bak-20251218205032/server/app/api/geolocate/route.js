"use strict";(()=>{var e={};e.id=4956,e.ids=[4956],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},96905:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>g,patchFetch:()=>m,requestAsyncStorage:()=>l,routeModule:()=>c,serverHooks:()=>f,staticGenerationAsyncStorage:()=>u});var o={};t.r(o),t.d(o,{GET:()=>p,dynamic:()=>d});var a=t(49303),s=t(88716),n=t(60670),i=t(87070);let d="force-dynamic";async function p(e){try{let{searchParams:r}=new URL(e.url),t=r.get("lat"),o=r.get("lon");if(t&&o){let e=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${t}&lon=${o}`);if(!e.ok)throw Error("Falha ao contatar o servi\xe7o de geocodifica\xe7\xe3o reversa.");let r=await e.json();if(r.error)return i.NextResponse.json({error:"N\xe3o foi poss\xedvel determinar a cidade a partir das coordenadas.",details:r.error},{status:404});let a=r.address.city||r.address.town||r.address.village;if(!a)return i.NextResponse.json({error:"Cidade n\xe3o encontrada nas coordenadas fornecidas."},{status:404});return i.NextResponse.json({city:a})}let a=e.headers.get("x-forwarded-for")??e.ip,s=await fetch(`http://ip-api.com/json/${a}?fields=status,message,city`);if(!s.ok)throw Error("Falha ao contatar o servi\xe7o de geolocaliza\xe7\xe3o por IP.");let n=await s.json();if("fail"===n.status)return i.NextResponse.json({error:"N\xe3o foi poss\xedvel determinar a cidade por IP.",details:n.message},{status:404});return i.NextResponse.json({city:n.city})}catch(e){return console.error("Erro na API de geolocaliza\xe7\xe3o:",e),i.NextResponse.json({error:"Erro interno no servidor."},{status:500})}}let c=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/geolocate/route",pathname:"/api/geolocate",filename:"route",bundlePath:"app/api/geolocate/route"},resolvedPagePath:"/var/www/barberflow/src/app/api/geolocate/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:l,staticGenerationAsyncStorage:u,serverHooks:f}=c,g="/api/geolocate/route";function m(){return(0,n.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:u})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[8948,5972],()=>t(96905));module.exports=o})();
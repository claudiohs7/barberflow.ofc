(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1731],{54333:function(e,t,r){Promise.resolve().then(r.bind(r,83037))},99376:function(e,t,r){"use strict";var a=r(35475);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},83037:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return W}});var a=r(57437),s=r(27648),n=r(99376),o=r(29501),i=r(13590),l=r(31229),c=r(2265),d=r(93448),u=r(71245),m=r(23340),f=r(12381),p=r(79820),h=r(80670),x=r(74291),g=r(40279),j=r(85291),N=r(56141),v=r(5485),y=r(53459),b=r(54734),w=r(59559),C=r(27311);let S=(0,r(96471).Z)("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var k=r(73966),I=r(82912),z="Progress",[P,E]=(0,k.b)(z),[T,Z]=P(z),O=c.forwardRef((e,t)=>{var r,s,n,o;let{__scopeProgress:i,value:l=null,max:c,getValueLabel:d=A,...u}=e;(c||0===c)&&!_(c)&&console.error((r="".concat(c),s="Progress","Invalid prop `max` of value `".concat(r,"` supplied to `").concat(s,"`. Only numbers greater than 0 are valid max values. Defaulting to `").concat(100,"`.")));let m=_(c)?c:100;null===l||$(l,m)||console.error((n="".concat(l),o="Progress","Invalid prop `value` of value `".concat(n,"` supplied to `").concat(o,"`. The `value` prop must be:\n  - a positive number\n  - less than the value passed to `max` (or ").concat(100," if no `max` prop is set)\n  - `null` or `undefined` if the progress is indeterminate.\n\nDefaulting to `null`.")));let f=$(l,m)?l:null,p=M(f)?d(f,m):void 0;return(0,a.jsx)(T,{scope:i,value:f,max:m,children:(0,a.jsx)(I.WV.div,{"aria-valuemax":m,"aria-valuemin":0,"aria-valuenow":M(f)?f:void 0,"aria-valuetext":p,role:"progressbar","data-state":F(f,m),"data-value":null!=f?f:void 0,"data-max":m,...u,ref:t})})});O.displayName=z;var D="ProgressIndicator",R=c.forwardRef((e,t)=>{var r;let{__scopeProgress:s,...n}=e,o=Z(D,s);return(0,a.jsx)(I.WV.div,{"data-state":F(o.value,o.max),"data-value":null!==(r=o.value)&&void 0!==r?r:void 0,"data-max":o.max,...n,ref:t})});function A(e,t){return"".concat(Math.round(e/t*100),"%")}function F(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function M(e){return"number"==typeof e}function _(e){return M(e)&&!isNaN(e)&&e>0}function $(e,t){return M(e)&&!isNaN(e)&&e<=t&&e>=0}R.displayName=D;let J=c.forwardRef((e,t)=>{let{className:r,value:s,...n}=e;return(0,a.jsx)(O,{ref:t,className:(0,d.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",r),...n,children:(0,a.jsx)(R,{className:"h-full w-full flex-1 bg-primary transition-all duration-500 ease-in-out",style:{transform:"translateX(-".concat(100-(s||0),"%)")}})})});J.displayName=O.displayName;var V=r(59121),B=r(94076);let G=l.z.object({barbershopName:l.z.string().min(2,"O nome da barbearia \xe9 muito curto"),legalName:l.z.string().min(2,"O nome/empresa \xe9 obrigat\xf3rio"),cep:l.z.string().min(8,"CEP inv\xe1lido").max(9,"CEP inv\xe1lido"),street:l.z.string().min(1,"A rua \xe9 obrigat\xf3ria"),number:l.z.string().min(1,"O n\xfamero \xe9 obrigat\xf3rio"),complement:l.z.string().optional(),neighborhood:l.z.string().min(1,"O bairro \xe9 obrigat\xf3rio"),city:l.z.string().min(1,"A cidade \xe9 obrigat\xf3ria"),state:l.z.string().min(1,"O estado \xe9 obrigat\xf3rio"),phone:l.z.string().min(10,"Por favor, insira um n\xfamero de WhatsApp v\xe1lido"),cpfCnpj:l.z.string().min(14,{message:"O CPF/CNPJ \xe9 obrigat\xf3rio e deve ser v\xe1lido."}),email:l.z.string().email("Por favor, insira um e-mail v\xe1lido"),password:l.z.string().min(6,"A senha deve ter pelo menos 6 caracteres")});function W(){let e=(0,n.useRouter)(),{signIn:t}=(0,u.a)(),{toast:r}=(0,m.pm)(),[l,k]=(0,c.useState)(1),[I,z]=(0,c.useState)(!1),[P,E]=(0,c.useState)(!1),[T,Z]=(0,c.useState)(null),[O,D]=(0,c.useState)("B\xe1sico"),[R,A]=(0,c.useState)(!1),F=(0,o.cI)({resolver:(0,i.F)(G),defaultValues:{barbershopName:"",legalName:"",cep:"",street:"",number:"",complement:"",neighborhood:"",city:"",state:"",phone:"",cpfCnpj:"",email:"",password:""}}),M=F.watch("cep"),_=F.watch("cpfCnpj");(0,c.useEffect)(()=>{let e=async()=>{let e=M.replace(/\D/g,"");if(8===e.length)try{let t=await fetch("/api/cep/".concat(e)),a=await t.json();a.error?r({variant:"destructive",title:"Erro de CEP",description:a.error}):(F.setValue("street",a.street),F.setValue("neighborhood",a.neighborhood),F.setValue("city",a.city),F.setValue("state",a.state),F.setFocus("number"))}catch(e){console.error("Failed to fetch address:",e),r({variant:"destructive",title:"Erro de Rede",description:"N\xe3o foi poss\xedvel buscar o endere\xe7o."})}};2===l&&e()},[M,F,r,l]),(0,c.useEffect)(()=>{let e=async()=>{let e=_.replace(/\D/g,"");if(14===e.length)try{let t=await fetch("/api/cnpj/".concat(e)),r=await t.json();r.error||(F.setValue("legalName",r.razao_social||""),F.setValue("barbershopName",r.nome_fantasia||""))}catch(e){console.error("Failed to fetch CNPJ data:",e)}};1===l&&e()},[_,F,l]);let $=e=>{let t=e.target.value;return(t=(t=(t=t.replace(/\D/g,"")).replace(/^(\d{2})(\d)/g,"($1) $2")).replace(/(\d{5})(\d)/,"$1-$2")).length>15&&(t=t.substring(0,15)),e.target.value=t,e},W=e=>{let t=e.target.value.replace(/\D/g,"");return t=t.length<=11?(t=(t=t.replace(/(\d{3})(\d)/,"$1.$2")).replace(/(\d{3})(\d)/,"$1.$2")).replace(/(\d{3})(\d{1,2})$/,"$1-$2"):(t=(t=(t=(t=t.substring(0,14)).replace(/^(\d{2})(\d)/,"$1.$2")).replace(/^(\d{2})\.(\d{3})(\d)/,"$1.$2.$3")).replace(/\.(\d{3})(\d)/,".$1/$2")).replace(/(\d{4})(\d)/,"$1-$2"),e.target.value=t,e},L=e=>{let t=e.target.value;return t=(t=t.replace(/\D/g,"")).replace(/^(\d{5})(\d)/,"$1-$2"),e.target.value=t,e},X=e=>(e.target.value=(0,d.Ls)(e.target.value),e),H=async()=>{await F.trigger(["cpfCnpj","legalName","barbershopName","phone"])&&k(2)},q=async()=>{if(!T){r({variant:"destructive",title:"Erro",description:"Dados do formul\xe1rio n\xe3o encontrados ou servi\xe7o indispon\xedvel."});return}z(!0);try{let a=(await (0,B.rd)("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:T.email,password:T.password,name:T.legalName||T.barbershopName,phone:T.phone,role:"ADMIN"})})).data,s=new Date,n=(0,V.E)(s,7);await (0,B.rd)("/api/barbershops",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ownerId:a.id,name:T.barbershopName,legalName:T.legalName,cpfCnpj:T.cpfCnpj||"",email:T.email,phone:T.phone,address:{street:T.street,number:T.number,complement:T.complement||"",neighborhood:T.neighborhood,city:T.city,state:T.state,cep:T.cep},operatingHours:[],plan:O,status:"Ativa",expiryDate:n.toISOString()})}),await t({email:T.email,password:T.password}),r({title:"Bem-vindo ao BarberFlow!",description:"Seu per\xedodo de teste de 7 dias no plano ".concat(O," foi ativado.")}),e.push("/admin/dashboard")}catch(t){var a,s;console.error("Erro no cadastro:",t);let e="Ocorreu um erro ao tentar se cadastrar. Tente novamente.";(null===(a=t.message)||void 0===a?void 0:a.includes("E-mail"))?e="Este e-mail j\xe1 est\xe1 em uso. Tente fazer login ou use um e-mail diferente.":(null===(s=t.message)||void 0===s?void 0:s.includes("CPF/CNPJ"))&&(e="Este CPF/CNPJ j\xe1 est\xe1 cadastrado em outra barbearia."),r({variant:"destructive",title:"Erro no Cadastro",description:e})}finally{z(!1),E(!1)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(p.Zb,{className:"w-full max-w-2xl",children:[(0,a.jsxs)(p.Ol,{children:[(0,a.jsx)(p.ll,{className:"text-2xl font-headline",children:"Cadastre sua Barbearia"}),(0,a.jsx)(p.SZ,{children:"Preencha seus dados para come\xe7ar. Voc\xea ter\xe1 7 dias de acesso gratuito para testar a plataforma."}),(0,a.jsxs)("div",{className:"pt-2",children:[(0,a.jsx)(J,{value:1===l?50:100,className:"w-full"}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground mt-2 text-right",children:["Passo ",l," de 2"]})]})]}),(0,a.jsxs)(p.aY,{children:[(0,a.jsx)(h.l0,{...F,children:(0,a.jsxs)("form",{onSubmit:F.handleSubmit(function(e){Z(e),E(!0)}),className:"space-y-4",children:[1===l&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(h.Wi,{control:F.control,name:"cpfCnpj",render:e=>{let{field:t}=e;return(0,a.jsxs)(h.xJ,{children:[(0,a.jsx)(h.lX,{children:"CPF ou CNPJ"}),(0,a.jsx)(h.NI,{children:(0,a.jsx)(g.I,{placeholder:"Seu CPF ou CNPJ",...t,onChange:e=>t.onChange(W(e))})}),(0,a.jsx)(h.zG,{})]})}}),(0,a.jsx)(h.Wi,{control:F.control,name:"legalName",render:e=>{let{field:t}=e;return(0,a.jsxs)(h.xJ,{children:[(0,a.jsx)(h.lX,{children:"Nome/Empresa (Raz\xe3o Social ou Propriet\xe1rio)"}),(0,a.jsx)(h.NI,{children:(0,a.jsx)(g.I,{placeholder:"Nome Completo ou Raz\xe3o Social",...t,onChange:e=>t.onChange(X(e))})}),(0,a.jsx)(h.zG,{})]})}}),(0,a.jsx)(h.Wi,{control:F.control,name:"barbershopName",render:e=>{let{field:t}=e;return(0,a.jsxs)(h.xJ,{children:[(0,a.jsx)(h.lX,{children:"Nome da Barbearia (Nome Fantasia)"}),(0,a.jsx)(h.NI,{children:(0,a.jsx)(g.I,{placeholder:"Barbearia Estilo",...t,onChange:e=>t.onChange(X(e))})}),(0,a.jsx)(h.zG,{})]})}}),(0,a.jsx)(h.Wi,{control:F.control,name:"phone",render:e=>{let{field:t}=e;return(0,a.jsxs)(h.xJ,{children:[(0,a.jsx)(h.lX,{children:"WhatsApp"}),(0,a.jsx)(h.NI,{children:(0,a.jsx)(g.I,{placeholder:"(11) 98765-4321",...t,onChange:e=>t.onChange($(e)),maxLength:15})}),(0,a.jsx)(h.zG,{})]})}}),(0,a.jsx)(f.z,{type:"button",className:"w-full",onClick:H,children:"Continuar"})]}),2===l&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,a.jsx)(h.Wi,{control:F.control,name:"cep",render:e=>{let{field:t}=e;return(0,a.jsxs)(h.xJ,{className:"sm:col-span-1",children:[(0,a.jsx)(h.lX,{children:"CEP"}),(0,a.jsx)(h.NI,{children:(0,a.jsx)(g.I,{placeholder:"00000-000",...t,onChange:e=>t.onChange(L(e)),maxLength:9})}),(0,a.jsx)(h.zG,{})]})}}),(0,a.jsx)(h.Wi,{control:F.control,name:"street",render:e=>{let{field:t}=e;return(0,a.jsxs)(h.xJ,{className:"sm:col-span-2",children:[(0,a.jsx)(h.lX,{children:"Rua"}),(0,a.jsx)(h.NI,{children:(0,a.jsx)(g.I,{placeholder:"Rua Principal",...t})}),(0,a.jsx)(h.zG,{})]})}})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,a.jsx)(h.Wi,{control:F.control,name:"number",render:e=>{let{field:t}=e;return(0,a.jsxs)(h.xJ,{className:"sm:col-span-1",children:[(0,a.jsx)(h.lX,{children:"N\xfamero"}),(0,a.jsx)(h.NI,{children:(0,a.jsx)(g.I,{placeholder:"123",...t})}),(0,a.jsx)(h.zG,{})]})}}),(0,a.jsx)(h.Wi,{control:F.control,name:"complement",render:e=>{let{field:t}=e;return(0,a.jsxs)(h.xJ,{className:"sm:col-span-2",children:[(0,a.jsx)(h.lX,{children:"Complemento (Opcional)"}),(0,a.jsx)(h.NI,{children:(0,a.jsx)(g.I,{placeholder:"Apto 101, Bloco B",...t})}),(0,a.jsx)(h.zG,{})]})}})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:(0,a.jsx)(h.Wi,{control:F.control,name:"neighborhood",render:e=>{let{field:t}=e;return(0,a.jsxs)(h.xJ,{className:"sm:col-span-3",children:[(0,a.jsx)(h.lX,{children:"Bairro"}),(0,a.jsx)(h.NI,{children:(0,a.jsx)(g.I,{placeholder:"Seu Bairro",...t})}),(0,a.jsx)(h.zG,{})]})}})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsx)(h.Wi,{control:F.control,name:"city",render:e=>{let{field:t}=e;return(0,a.jsxs)(h.xJ,{children:[(0,a.jsx)(h.lX,{children:"Cidade"}),(0,a.jsx)(h.NI,{children:(0,a.jsx)(g.I,{placeholder:"Sua Cidade",...t})}),(0,a.jsx)(h.zG,{})]})}}),(0,a.jsx)(h.Wi,{control:F.control,name:"state",render:e=>{let{field:t}=e;return(0,a.jsxs)(h.xJ,{children:[(0,a.jsx)(h.lX,{children:"Estado"}),(0,a.jsx)(h.NI,{children:(0,a.jsx)(g.I,{placeholder:"UF",...t})}),(0,a.jsx)(h.zG,{})]})}})]}),(0,a.jsx)(h.Wi,{control:F.control,name:"email",render:e=>{let{field:t}=e;return(0,a.jsxs)(h.xJ,{children:[(0,a.jsx)(h.lX,{children:"E-mail de Login"}),(0,a.jsx)(h.NI,{children:(0,a.jsx)(g.I,{placeholder:"voce@exemplo.com",...t})}),(0,a.jsx)(h.zG,{})]})}}),(0,a.jsx)(h.Wi,{control:F.control,name:"password",render:e=>{let{field:t}=e;return(0,a.jsxs)(h.xJ,{children:[(0,a.jsx)(h.lX,{children:"Senha"}),(0,a.jsx)(h.NI,{children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(g.I,{type:R?"text":"password",placeholder:"••••••••",...t}),(0,a.jsx)(f.z,{type:"button",variant:"ghost",size:"icon",className:"absolute right-2 top-1/2 -translate-y-1/2 h-7 w-7",onClick:()=>A(e=>!e),children:R?(0,a.jsx)(j.Z,{className:"h-4 w-4"}):(0,a.jsx)(N.Z,{className:"h-4 w-4"})})]})}),(0,a.jsx)(h.zG,{})]})}}),(0,a.jsxs)("div",{className:"flex flex-col-reverse sm:flex-row gap-2",children:[(0,a.jsxs)(f.z,{type:"button",variant:"outline",className:"w-full sm:w-auto",onClick:()=>k(1),children:[(0,a.jsx)(v.Z,{className:"mr-2 h-4 w-4"}),"Voltar"]}),(0,a.jsxs)(f.z,{type:"submit",className:"w-full",disabled:I,children:[I?(0,a.jsx)(y.Z,{className:"mr-2 h-4 w-4 animate-spin"}):(0,a.jsx)(b.Z,{className:"mr-2 h-4 w-4"}),I?"Finalizando...":"Finalizar e Escolher Plano"]})]})]})]})}),(0,a.jsxs)("div",{className:"mt-4 text-center text-sm",children:["J\xe1 tem uma conta?"," ",(0,a.jsx)(s.default,{href:"/auth/admin/login",className:"underline",children:"Fa\xe7a login"}),(0,a.jsx)("span",{className:"mx-1",children:"|"}),(0,a.jsx)(s.default,{href:"/",className:"underline",children:"Voltar para a Home"})]})]})]}),(0,a.jsx)(x.Vq,{open:P,onOpenChange:E,children:(0,a.jsxs)(x.cZ,{className:"sm:max-w-3xl",onInteractOutside:e=>{I&&e.preventDefault()},children:[(0,a.jsxs)(x.fK,{children:[(0,a.jsx)(x.$N,{className:"text-center text-2xl font-headline",children:"Escolha o plano para o seu teste"}),(0,a.jsx)(x.Be,{className:"text-center",children:"Todos os planos come\xe7am com 7 dias de teste gratuito. Escolha o que melhor se adapta \xe0 sua barbearia."})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 py-4",children:[(0,a.jsxs)(p.Zb,{className:(0,d.cn)("cursor-pointer border-2 transition-all","B\xe1sico"===O?"border-primary shadow-lg shadow-primary/20":"border-border hover:border-primary/50"),onClick:()=>D("B\xe1sico"),children:[(0,a.jsxs)(p.Ol,{children:[(0,a.jsx)(p.ll,{children:"B\xe1sico"}),(0,a.jsxs)("p",{className:"text-2xl font-bold pt-2",children:[(0,d.xG)(49.9),(0,a.jsx)("span",{className:"text-sm font-normal text-muted-foreground",children:"/m\xeas"})]})]}),(0,a.jsx)(p.aY,{children:(0,a.jsxs)("ul",{className:"space-y-3 text-sm text-muted-foreground",children:[(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)(w.Z,{className:"h-4 w-4 text-primary mt-1 shrink-0"}),(0,a.jsx)("span",{children:"Agenda e Agendamentos"})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)(w.Z,{className:"h-4 w-4 text-primary mt-1 shrink-0"}),(0,a.jsx)("span",{children:"Cadastro de Clientes"})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)(w.Z,{className:"h-4 w-4 text-primary mt-1 shrink-0"}),(0,a.jsx)("span",{children:"Controle de Despesas"})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)(w.Z,{className:"h-4 w-4 text-primary mt-1 shrink-0"}),(0,a.jsx)("span",{children:"Gest\xe3o de Barbeiros e Servi\xe7os"})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)(w.Z,{className:"h-4 w-4 text-primary mt-1 shrink-0"}),(0,a.jsx)("span",{children:"P\xe1gina de Agendamento P\xfablica"})]})]})})]}),(0,a.jsxs)(p.Zb,{className:(0,d.cn)("cursor-pointer border-2 transition-all","Premium"===O?"border-primary shadow-lg shadow-primary/20":"border-border hover:border-primary/50"),onClick:()=>D("Premium"),children:[(0,a.jsxs)(p.Ol,{children:[(0,a.jsxs)(p.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(C.Z,{className:"h-5 w-5 text-primary"}),"Premium"]}),(0,a.jsxs)("p",{className:"text-2xl font-bold pt-2",children:[(0,d.xG)(119.9),(0,a.jsx)("span",{className:"text-sm font-normal text-muted-foreground",children:"/m\xeas"})]})]}),(0,a.jsx)(p.aY,{children:(0,a.jsxs)("ul",{className:"space-y-3 text-sm text-muted-foreground",children:[(0,a.jsxs)("li",{className:"flex items-start gap-2 font-semibold text-foreground",children:[(0,a.jsx)(w.Z,{className:"h-4 w-4 text-primary mt-1 shrink-0"}),(0,a.jsx)("span",{children:"Tudo do Plano B\xe1sico"})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)(w.Z,{className:"h-4 w-4 text-primary mt-1 shrink-0"}),(0,a.jsx)("span",{children:"Notifica\xe7\xf5es via WhatsApp (lembretes, confirma\xe7\xf5es)"})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)(w.Z,{className:"h-4 w-4 text-primary mt-1 shrink-0"}),(0,a.jsx)("span",{children:"Pesquisa de Satisfa\xe7\xe3o p\xf3s-servi\xe7o"})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)(w.Z,{className:"h-4 w-4 text-primary mt-1 shrink-0"}),(0,a.jsx)("span",{children:"Webhooks para integra\xe7\xf5es com outras ferramentas"})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)(w.Z,{className:"h-4 w-4 text-primary mt-1 shrink-0"}),(0,a.jsx)("span",{children:"Relat\xf3rios Avan\xe7ados (em breve)"})]})]})})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-center p-3 rounded-md bg-green-500/10 border border-green-500/20 text-green-300",children:[(0,a.jsx)(S,{className:"h-5 w-5 mr-3"}),(0,a.jsx)("p",{className:"text-sm font-medium",children:"Seu teste gratuito de 7 dias ser\xe1 iniciado ap\xf3s a confirma\xe7\xe3o."})]}),(0,a.jsx)(x.cN,{children:(0,a.jsxs)(f.z,{onClick:q,className:"w-full",disabled:I,children:[I?(0,a.jsx)(y.Z,{className:"mr-2 h-4 w-4 animate-spin"}):(0,a.jsx)(b.Z,{className:"mr-2 h-4 w-4"}),I?"Finalizando...":"Iniciar Teste no Plano ".concat(O)]})})]})})]})}},12381:function(e,t,r){"use strict";r.d(t,{d:function(){return l},z:function(){return c}});var a=r(57437),s=r(2265),n=r(98482),o=r(90535),i=r(93448);let l=(0,o.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:r,variant:s,size:o,asChild:c=!1,...d}=e,u=c?n.g7:"button";return(0,a.jsx)(u,{className:(0,i.cn)(l({variant:s,size:o,className:r})),ref:t,...d})});c.displayName="Button"},79820:function(e,t,r){"use strict";r.d(t,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return o},aY:function(){return d},eW:function(){return u},ll:function(){return l}});var a=r(57437),s=r(2265),n=r(93448);let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});o.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...s})});i.displayName="CardHeader";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});l.displayName="CardTitle";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})});c.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...s})});d.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...s})});u.displayName="CardFooter"},74291:function(e,t,r){"use strict";r.d(t,{$N:function(){return x},Be:function(){return g},GG:function(){return u},Vq:function(){return l},cN:function(){return h},cZ:function(){return f},fK:function(){return p},hg:function(){return c}});var a=r(57437),s=r(2265),n=r(70001),o=r(44986),i=r(93448);let l=n.fC,c=n.xz,d=n.h_,u=n.x8,m=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.aV,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...s})});m.displayName=n.aV.displayName;let f=s.forwardRef((e,t)=>{let{className:r,children:s,...l}=e;return(0,a.jsxs)(d,{children:[(0,a.jsx)(m,{}),(0,a.jsxs)(n.VY,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...l,children:[s,(0,a.jsxs)(n.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});f.displayName=n.VY.displayName;let p=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...r})};p.displayName="DialogHeader";let h=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};h.displayName="DialogFooter";let x=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",r),...s})});x.displayName=n.Dx.displayName;let g=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.dk,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",r),...s})});g.displayName=n.dk.displayName},80670:function(e,t,r){"use strict";r.d(t,{NI:function(){return x},Wi:function(){return u},l0:function(){return c},lX:function(){return h},pf:function(){return g},xJ:function(){return p},zG:function(){return j}});var a=r(57437),s=r(2265),n=r(98482),o=r(29501),i=r(93448),l=r(75060);let c=o.RV,d=s.createContext({}),u=e=>{let{...t}=e;return(0,a.jsx)(d.Provider,{value:{name:t.name},children:(0,a.jsx)(o.Qr,{...t})})},m=()=>{let e=s.useContext(d),t=s.useContext(f),{getFieldState:r,formState:a}=(0,o.Gc)(),n=r(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=t;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...n}},f=s.createContext({}),p=s.forwardRef((e,t)=>{let{className:r,...n}=e,o=s.useId();return(0,a.jsx)(f.Provider,{value:{id:o},children:(0,a.jsx)("div",{ref:t,className:(0,i.cn)("space-y-2",r),...n})})});p.displayName="FormItem";let h=s.forwardRef((e,t)=>{let{className:r,...s}=e,{error:n,formItemId:o}=m();return(0,a.jsx)(l._,{ref:t,className:(0,i.cn)(n&&"text-destructive",r),htmlFor:o,...s})});h.displayName="FormLabel";let x=s.forwardRef((e,t)=>{let{...r}=e,{error:s,formItemId:o,formDescriptionId:i,formMessageId:l}=m();return(0,a.jsx)(n.g7,{ref:t,id:o,"aria-describedby":s?"".concat(i," ").concat(l):"".concat(i),"aria-invalid":!!s,...r})});x.displayName="FormControl";let g=s.forwardRef((e,t)=>{let{className:r,...s}=e,{formDescriptionId:n}=m();return(0,a.jsx)("p",{ref:t,id:n,className:(0,i.cn)("text-sm text-muted-foreground",r),...s})});g.displayName="FormDescription";let j=s.forwardRef((e,t)=>{var r;let{className:s,children:n,...o}=e,{error:l,formMessageId:c}=m(),d=l?String(null!==(r=null==l?void 0:l.message)&&void 0!==r?r:""):n;return d?(0,a.jsx)("p",{ref:t,id:c,className:(0,i.cn)("text-sm font-medium text-destructive",s),...o,children:d}):null});j.displayName="FormMessage"},40279:function(e,t,r){"use strict";r.d(t,{I:function(){return o}});var a=r(57437),s=r(2265),n=r(93448);let o=s.forwardRef((e,t)=>{let{className:r,type:s,...o}=e;return(0,a.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...o})});o.displayName="Input"},75060:function(e,t,r){"use strict";r.d(t,{_:function(){return c}});var a=r(57437),s=r(2265),n=r(6394),o=r(90535),i=r(93448);let l=(0,o.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.f,{ref:t,className:(0,i.cn)(l(),r),...s})});c.displayName=n.f.displayName},71245:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return u},a:function(){return m}});var a=r(57437),s=r(2265),n=r(94076);let o=(0,s.createContext)(void 0),i="barberflow_access_token";function l(e){e?window.localStorage.setItem(i,e):window.localStorage.removeItem(i)}async function c(e){return(await (0,n.rd)("/api/auth/me",{credentials:"omit",headers:{Authorization:"Bearer ".concat(e)}})).data}async function d(){let e=await (0,n.rd)("/api/auth/refresh",{method:"POST",credentials:"include"});return(0,n.M8)(e.data.accessToken),e.data.user}function u(e){let{children:t}=e,[r,i]=(0,s.useState)(null),[u,m]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let e=!0;return(async()=>{m(!0);let t=(0,n.hP)();if(!t){e&&(i(null),m(!1));return}try{let r=await c(t);if(!e)return;i(r)}catch(t){try{let t=await d();e&&i(t)}catch(t){l(null),e&&i(null)}}finally{e&&m(!1)}})(),()=>{e=!1}},[]);let f=async e=>{let t=e.email.trim().toLowerCase(),r=await (0,n.rd)("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,email:t})});return l(r.data.accessToken),(0,n.M8)(r.data.accessToken),i(r.data.user),r.data.user},p=async()=>{await fetch("/api/auth/logout",{method:"POST"}),(0,n.M8)(null),i(null)},h=(0,s.useCallback)(async()=>{let e=(0,n.hP)();if(!e)return null;try{let t=await c(e);return i(t),t}catch(e){return i(null),null}},[]),x=(0,s.useMemo)(()=>({user:r,isLoading:u,signIn:f,signOut:p,refreshUser:h}),[r,u,h]);return(0,a.jsx)(o.Provider,{value:x,children:t})}function m(){let e=(0,s.useContext)(o);if(!e)throw Error("useAuth deve ser usado dentro de AuthProvider");return e}},23340:function(e,t,r){"use strict";r.d(t,{pm:function(){return m}});var a=r(2265);let s=0,n=new Map,o=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?o(r):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],c={toasts:[]};function d(e){c=i(c,e),l.forEach(e=>{e(c)})}function u(e){let{...t}=e,r=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>d({type:"DISMISS_TOAST",toastId:r});return d({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||a()}}}),{id:r,dismiss:a,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function m(){let[e,t]=a.useState(c);return a.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},94076:function(e,t,r){"use strict";r.d(t,{M8:function(){return n},hP:function(){return s},rd:function(){return o}});let a="barberflow_access_token";function s(){return window.localStorage.getItem(a)}function n(e){e?window.localStorage.setItem(a,e):window.localStorage.removeItem(a)}async function o(e){var t,r;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new Headers(a.headers),o=s();o&&n.set("Authorization","Bearer ".concat(o));let i=await fetch(e,{...a,headers:n,credentials:null!==(t=a.credentials)&&void 0!==t?t:"omit"});if(!i.ok){if((i.headers.get("content-type")||"").includes("application/json"))try{let e=(r=await i.json())&&"object"==typeof r?"string"==typeof r.error&&r.error.trim()?r.error.trim():"string"==typeof r.message&&r.message.trim()?r.message.trim():"string"==typeof r.detail&&r.detail.trim()?r.detail.trim():null:null;throw Error(e||i.statusText||"Falha na requisi\xe7\xe3o.")}catch(e){if(e instanceof Error&&e.message)throw e}throw Error((await i.text()).trim()||i.statusText||"Falha na requisi\xe7\xe3o.")}return i.json()}},93448:function(e,t,r){"use strict";r.d(t,{Ls:function(){return o},cn:function(){return n},lV:function(){return l},xG:function(){return i}});var a=r(61994),s=r(53335);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}function o(e){return e?e.toLowerCase().split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "):""}function i(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)}function l(e){return e?e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").replace(/-{2,}/g,"-"):""}},59121:function(e,t,r){"use strict";r.d(t,{E:function(){return n}});var a=r(99649),s=r(63497);function n(e,t){let r=(0,a.Q)(e);return isNaN(t)?(0,s.L)(e,NaN):(t&&r.setDate(r.getDate()+t),r)}},63497:function(e,t,r){"use strict";function a(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}r.d(t,{L:function(){return a}})},99649:function(e,t,r){"use strict";function a(e){let t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new e.constructor(+e):new Date("number"==typeof e||"[object Number]"===t||"string"==typeof e||"[object String]"===t?e:NaN)}r.d(t,{Q:function(){return a}})},5485:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(96471).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},54734:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(96471).Z)("CalendarCheck",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]])},59559:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(96471).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},27311:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(96471).Z)("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]])},85291:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(96471).Z)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},56141:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(96471).Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},53459:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(96471).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])}},function(e){e.O(0,[6137,1906,9049,7347,8888,8658,2971,2117,1744],function(){return e(e.s=54333)}),_N_E=e.O()}]);
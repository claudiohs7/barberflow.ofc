(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[499],{91760:function(e,t,r){Promise.resolve().then(r.bind(r,58880))},58880:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return C}});var a=r(57437),n=r(2265),s=r(29501),i=r(13590),l=r(31229),o=r(12381),d=r(79820),c=r(80670),u=r(40279),f=r(23340),m=r(71245),h=r(94076),p=r(93448),v=r(5485),x=r(35465),g=r(15847),w=r(85291),y=r(56141),j=r(27648),b=r(96246);let N=l.Ry({name:l.Z_().min(2,{message:"O nome deve ter pelo menos 2 caracteres."}),phone:l.Z_().min(10,{message:"Um n\xfamero de WhatsApp v\xe1lido \xe9 obrigat\xf3rio."})}),S=l.Ry({currentPassword:l.Z_().min(6,{message:"Senha atual \xe9 obrigat\xf3ria."}),newPassword:l.Z_().min(6,{message:"A nova senha deve ter pelo menos 6 caracteres."}),confirmPassword:l.Z_().min(6,{message:"Confirma\xe7\xe3o de senha \xe9 obrigat\xf3ria."})}).refine(e=>e.newPassword===e.confirmPassword,{message:"As senhas n\xe3o coincidem.",path:["confirmPassword"]});function C(){let{toast:e}=(0,f.pm)(),t=(0,m.a)(),{user:r}=t,[l,C]=(0,n.useState)(null),[T,A]=(0,n.useState)(!0),[I,P]=(0,n.useState)(!1),[E,k]=(0,n.useState)(!1),[z,_]=(0,n.useState)(!1),[O,R]=(0,n.useState)(!1),[F,Z]=(0,n.useState)(!1),[M,D]=(0,n.useState)(!1),[U,W]=(0,n.useState)(!1),[J,G]=(0,n.useState)(null),[L,V]=(0,n.useState)(null),[X,H]=(0,n.useState)(!1),B=(0,s.cI)({resolver:(0,i.F)(N),defaultValues:{name:"",phone:""}}),Y=(0,s.cI)({resolver:(0,i.F)(S),defaultValues:{currentPassword:"",newPassword:"",confirmPassword:""}});(0,n.useEffect)(()=>{if(!(null==r?void 0:r.id)){C(null),B.reset({name:"",phone:""}),A(!1);return}let t=!1;return(async()=>{A(!0);try{var a,n,s;let e=await (0,h.rd)("/api/clients?userId=".concat(r.id)),i=(null===(a=e.data)||void 0===a?void 0:a[0])||null;if(t)return;C(i),G(null!==(n=null==r?void 0:r.avatarUrl)&&void 0!==n?n:null),V(null!==(s=null==r?void 0:r.avatarUrl)&&void 0!==s?s:null),B.reset({name:(null==i?void 0:i.name)||r.name||"",phone:(null==i?void 0:i.phone)||(null==r?void 0:r.phone)||""})}catch(r){console.error("Erro ao carregar perfil:",r),t||e({variant:"destructive",title:"Erro",description:"N\xe3o foi poss\xedvel carregar seu perfil."})}finally{t||A(!1)}})(),()=>{t=!0}},[r,B,e]);let $=e=>{let t=e.target.value;return(t=(t=(t=t.replace(/\D/g,"")).replace(/^(\d{2})(\d)/g,"($1) $2")).replace(/(\d{5})(\d)/,"$1-$2")).length>15&&(t=t.substring(0,15)),e.target.value=t,e},q=e=>(e.target.value=(0,p.Ls)(e.target.value),e),Q=async a=>{if(!(null==r?void 0:r.id)){e({variant:"destructive",title:"Erro",description:"N\xe3o foi poss\xedvel identificar seu perfil."});return}P(!0);try{var n,s,i,o,d,c;if(J!==L){H(!0);let e=async()=>{let e=await (0,h.rd)("/api/auth/update-profile",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({avatarUrl:J,name:a.name,phone:a.phone})});(0,h.M8)(e.data.accessToken),await t.refreshUser()};try{await e()}catch(r){if((null==r?void 0:null===(n=r.message)||void 0===n?void 0:n.includes("401"))||(null==r?void 0:null===(s=r.message)||void 0===s?void 0:s.includes("N\xe3o autenticado")))await t.refreshUser(),await e();else throw r}V(J)}let r=async()=>{let e=await (0,h.rd)("/api/auth/update-profile",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a.name,phone:a.phone})});(0,h.M8)(e.data.accessToken),await t.refreshUser()};try{await r()}catch(e){if((null==e?void 0:null===(i=e.message)||void 0===i?void 0:i.includes("401"))||(null==e?void 0:null===(o=e.message)||void 0===o?void 0:o.includes("N\xe3o autenticado")))await t.refreshUser(),await r();else throw e}if(null==l?void 0:l.id){let e=async()=>{let e=await (0,h.rd)("/api/clients/".concat(l.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a.name,phone:a.phone})});C(e.data)};try{await e()}catch(r){if((null==r?void 0:null===(d=r.message)||void 0===d?void 0:d.includes("401"))||(null==r?void 0:null===(c=r.message)||void 0===c?void 0:c.includes("N\xe3o autenticado")))await t.refreshUser(),await e();else throw r}}e({title:"Perfil atualizado",description:"Suas informa\xe7\xf5es foram salvas com sucesso."}),l&&C({...l,name:a.name,phone:a.phone}),B.reset({name:a.name,phone:a.phone}),_(!1)}catch(t){console.error("Erro ao atualizar perfil:",t),e({variant:"destructive",title:"Erro",description:"N\xe3o foi poss\xedvel atualizar seu perfil."})}finally{P(!1),H(!1)}},K=async a=>{if(!r){e({variant:"destructive",title:"Erro",description:"Usu\xe1rio n\xe3o autenticado."});return}k(!0);try{let r=await (0,h.rd)("/api/auth/update-profile",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPassword:a.currentPassword,newPassword:a.newPassword})});(0,h.M8)(r.data.accessToken),await t.refreshUser(),e({title:"Senha atualizada",description:"Sua senha foi redefinida com sucesso."}),Y.reset(),R(!1)}catch(t){console.error("Erro ao alterar senha:",t),e({variant:"destructive",title:"Erro",description:t.message||"N\xe3o foi poss\xedvel alterar a senha."})}finally{k(!1)}},ee=T||I||X;return(0,a.jsxs)("div",{className:"grid gap-6",children:[(0,a.jsx)(o.z,{variant:"outline",asChild:!0,className:"w-fit",children:(0,a.jsxs)(j.default,{href:"/client/dashboard",children:[(0,a.jsx)(v.Z,{className:"mr-2 h-4 w-4"}),"Voltar ao Menu"]})}),(0,a.jsx)(d.Zb,{children:(0,a.jsx)(c.l0,{...B,children:(0,a.jsxs)("form",{onSubmit:B.handleSubmit(Q),children:[(0,a.jsxs)(d.Ol,{children:[(0,a.jsx)(d.ll,{children:"Perfil"}),(0,a.jsx)(d.SZ,{children:"Atualize suas informa\xe7\xf5es de contato."})]}),(0,a.jsx)(d.aY,{className:"space-y-4",children:(0,a.jsxs)("div",{className:"flex flex-col gap-6 md:flex-row md:items-center",children:[(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsxs)(b.Avatar,{className:"h-20 w-20 text-xl",children:[J?(0,a.jsx)(b.AvatarImage,{src:J,alt:"Avatar"}):null,(0,a.jsx)(b.AvatarFallback,{children:(B.getValues("name")||(null==r?void 0:r.name)||"C").charAt(0)})]}),z&&(0,a.jsx)("label",{htmlFor:"avatar-upload",className:"absolute inset-0 flex items-center justify-center bg-black/50 text-white rounded-full cursor-pointer opacity-0 group-hover:opacity-100 transition-opacity text-xs font-medium",children:"Trocar foto"}),(0,a.jsx)(u.I,{id:"avatar-upload",type:"file",accept:"image/*",onChange:e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!r)return;let a=new FileReader;a.onloadend=()=>{var e;G((null===(e=a.result)||void 0===e?void 0:e.toString())||null)},a.readAsDataURL(r)},className:"sr-only",disabled:!z||X})]})}),(0,a.jsxs)("div",{className:"flex-1 space-y-4",children:[(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:["E-mail cadastrado: ",(0,a.jsx)("span",{className:"font-medium text-foreground",children:(null==r?void 0:r.email)||"N\xe3o informado"})]}),(0,a.jsx)(c.Wi,{control:B.control,name:"name",render:e=>{let{field:t}=e;return(0,a.jsxs)(c.xJ,{children:[(0,a.jsx)(c.lX,{children:"Nome Completo"}),(0,a.jsx)(c.NI,{children:(0,a.jsx)(u.I,{placeholder:"Seu nome",...t,onChange:e=>t.onChange(q(e)),disabled:!z||ee})}),(0,a.jsx)(c.zG,{})]})}}),(0,a.jsx)(c.Wi,{control:B.control,name:"phone",render:e=>{let{field:t}=e;return(0,a.jsxs)(c.xJ,{children:[(0,a.jsx)(c.lX,{children:"Telefone WhatsApp"}),(0,a.jsx)(c.NI,{children:(0,a.jsx)(u.I,{placeholder:"(11) 98765-4321",...t,onChange:e=>t.onChange($(e)),disabled:!z||ee,maxLength:15})}),(0,a.jsx)(c.zG,{})]})}})]})]})}),(0,a.jsx)(d.eW,{children:z?(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsxs)(o.z,{type:"submit",disabled:ee,children:[(0,a.jsx)(x.Z,{className:"mr-2 h-4 w-4"}),"Salvar Perfil"]}),(0,a.jsx)(o.z,{variant:"ghost",type:"button",onClick:()=>{B.reset({name:(null==l?void 0:l.name)||(null==r?void 0:r.name)||"",phone:(null==l?void 0:l.phone)||(null==r?void 0:r.phone)||""}),G(L),_(!1)},disabled:ee,children:"Cancelar"})]}):(0,a.jsxs)(o.z,{type:"button",onClick:()=>_(!0),disabled:T,children:[(0,a.jsx)(g.Z,{className:"mr-2 h-4 w-4"}),"Editar Perfil"]})})]})})}),(0,a.jsxs)(d.Zb,{children:[(0,a.jsxs)(d.Ol,{children:[(0,a.jsx)(d.ll,{children:"Alterar Senha"}),(0,a.jsx)(d.SZ,{children:"Informe a senha atual para definir uma nova."})]}),(0,a.jsx)(c.l0,{...Y,children:(0,a.jsxs)("form",{onSubmit:Y.handleSubmit(K),children:[(0,a.jsxs)(d.aY,{className:"space-y-4",children:[(0,a.jsx)(c.Wi,{control:Y.control,name:"currentPassword",render:e=>{let{field:t}=e;return(0,a.jsxs)(c.xJ,{children:[(0,a.jsx)(c.lX,{children:"Senha Atual"}),(0,a.jsx)(c.NI,{children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(u.I,{type:F?"text":"password",placeholder:"••••••••",...t,disabled:!O||E}),(0,a.jsx)(o.z,{type:"button",variant:"ghost",size:"icon",className:"absolute right-2 top-1/2 -translate-y-1/2 h-7 w-7",onClick:()=>Z(e=>!e),children:F?(0,a.jsx)(w.Z,{className:"h-4 w-4"}):(0,a.jsx)(y.Z,{className:"h-4 w-4"})})]})}),(0,a.jsx)(c.zG,{})]})}}),(0,a.jsx)(c.Wi,{control:Y.control,name:"newPassword",render:e=>{let{field:t}=e;return(0,a.jsxs)(c.xJ,{children:[(0,a.jsx)(c.lX,{children:"Nova Senha"}),(0,a.jsx)(c.NI,{children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(u.I,{type:M?"text":"password",placeholder:"••••••••",...t,disabled:!O||E}),(0,a.jsx)(o.z,{type:"button",variant:"ghost",size:"icon",className:"absolute right-2 top-1/2 -translate-y-1/2 h-7 w-7",onClick:()=>D(e=>!e),children:M?(0,a.jsx)(w.Z,{className:"h-4 w-4"}):(0,a.jsx)(y.Z,{className:"h-4 w-4"})})]})}),(0,a.jsx)(c.zG,{})]})}}),(0,a.jsx)(c.Wi,{control:Y.control,name:"confirmPassword",render:e=>{let{field:t}=e;return(0,a.jsxs)(c.xJ,{children:[(0,a.jsx)(c.lX,{children:"Confirmar Nova Senha"}),(0,a.jsx)(c.NI,{children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(u.I,{type:U?"text":"password",placeholder:"••••••••",...t,disabled:!O||E}),(0,a.jsx)(o.z,{type:"button",variant:"ghost",size:"icon",className:"absolute right-2 top-1/2 -translate-y-1/2 h-7 w-7",onClick:()=>W(e=>!e),children:U?(0,a.jsx)(w.Z,{className:"h-4 w-4"}):(0,a.jsx)(y.Z,{className:"h-4 w-4"})})]})}),(0,a.jsx)(c.zG,{})]})}})]}),(0,a.jsx)(d.eW,{children:O?(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsxs)(o.z,{type:"submit",disabled:E,children:[(0,a.jsx)(x.Z,{className:"mr-2 h-4 w-4"}),"Salvar Senha"]}),(0,a.jsx)(o.z,{variant:"ghost",type:"button",onClick:()=>{Y.reset(),R(!1)},disabled:E,children:"Cancelar"})]}):(0,a.jsxs)(o.z,{type:"button",onClick:()=>R(!0),children:[(0,a.jsx)(g.Z,{className:"mr-2 h-4 w-4"}),"Alterar Senha"]})})]})})]})]})}},96246:function(e,t,r){"use strict";r.d(t,{Avatar:function(){return l},AvatarFallback:function(){return d},AvatarImage:function(){return o}});var a=r(57437),n=r(2265),s=r(70650),i=r(93448);let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.fC,{ref:t,className:(0,i.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",r),...n})});l.displayName=s.fC.displayName;let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.Ee,{ref:t,className:(0,i.cn)("aspect-square h-full w-full",r),...n})});o.displayName=s.Ee.displayName;let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.NY,{ref:t,className:(0,i.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",r),...n})});d.displayName=s.NY.displayName},12381:function(e,t,r){"use strict";r.d(t,{d:function(){return o},z:function(){return d}});var a=r(57437),n=r(2265),s=r(98482),i=r(90535),l=r(93448);let o=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,t)=>{let{className:r,variant:n,size:i,asChild:d=!1,...c}=e,u=d?s.g7:"button";return(0,a.jsx)(u,{className:(0,l.cn)(o({variant:n,size:i,className:r})),ref:t,...c})});d.displayName="Button"},79820:function(e,t,r){"use strict";r.d(t,{Ol:function(){return l},SZ:function(){return d},Zb:function(){return i},aY:function(){return c},eW:function(){return u},ll:function(){return o}});var a=r(57437),n=r(2265),s=r(93448);let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...n})});i.displayName="Card";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",r),...n})});l.displayName="CardHeader";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",r),...n})});o.displayName="CardTitle";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",r),...n})});d.displayName="CardDescription";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",r),...n})});c.displayName="CardContent";let u=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",r),...n})});u.displayName="CardFooter"},80670:function(e,t,r){"use strict";r.d(t,{NI:function(){return v},Wi:function(){return u},l0:function(){return d},lX:function(){return p},pf:function(){return x},xJ:function(){return h},zG:function(){return g}});var a=r(57437),n=r(2265),s=r(98482),i=r(29501),l=r(93448),o=r(75060);let d=i.RV,c=n.createContext({}),u=e=>{let{...t}=e;return(0,a.jsx)(c.Provider,{value:{name:t.name},children:(0,a.jsx)(i.Qr,{...t})})},f=()=>{let e=n.useContext(c),t=n.useContext(m),{getFieldState:r,formState:a}=(0,i.Gc)(),s=r(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=t;return{id:l,name:e.name,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...s}},m=n.createContext({}),h=n.forwardRef((e,t)=>{let{className:r,...s}=e,i=n.useId();return(0,a.jsx)(m.Provider,{value:{id:i},children:(0,a.jsx)("div",{ref:t,className:(0,l.cn)("space-y-2",r),...s})})});h.displayName="FormItem";let p=n.forwardRef((e,t)=>{let{className:r,...n}=e,{error:s,formItemId:i}=f();return(0,a.jsx)(o._,{ref:t,className:(0,l.cn)(s&&"text-destructive",r),htmlFor:i,...n})});p.displayName="FormLabel";let v=n.forwardRef((e,t)=>{let{...r}=e,{error:n,formItemId:i,formDescriptionId:l,formMessageId:o}=f();return(0,a.jsx)(s.g7,{ref:t,id:i,"aria-describedby":n?"".concat(l," ").concat(o):"".concat(l),"aria-invalid":!!n,...r})});v.displayName="FormControl";let x=n.forwardRef((e,t)=>{let{className:r,...n}=e,{formDescriptionId:s}=f();return(0,a.jsx)("p",{ref:t,id:s,className:(0,l.cn)("text-sm text-muted-foreground",r),...n})});x.displayName="FormDescription";let g=n.forwardRef((e,t)=>{var r;let{className:n,children:s,...i}=e,{error:o,formMessageId:d}=f(),c=o?String(null!==(r=null==o?void 0:o.message)&&void 0!==r?r:""):s;return c?(0,a.jsx)("p",{ref:t,id:d,className:(0,l.cn)("text-sm font-medium text-destructive",n),...i,children:c}):null});g.displayName="FormMessage"},40279:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});var a=r(57437),n=r(2265),s=r(93448);let i=n.forwardRef((e,t)=>{let{className:r,type:n,...i}=e;return(0,a.jsx)("input",{type:n,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...i})});i.displayName="Input"},75060:function(e,t,r){"use strict";r.d(t,{_:function(){return d}});var a=r(57437),n=r(2265),s=r(6394),i=r(90535),l=r(93448);let o=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.f,{ref:t,className:(0,l.cn)(o(),r),...n})});d.displayName=s.f.displayName},71245:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return u},a:function(){return f}});var a=r(57437),n=r(2265),s=r(94076);let i=(0,n.createContext)(void 0),l="barberflow_access_token";function o(e){e?window.localStorage.setItem(l,e):window.localStorage.removeItem(l)}async function d(e){return(await (0,s.rd)("/api/auth/me",{credentials:"omit",headers:{Authorization:"Bearer ".concat(e)}})).data}async function c(){let e=await (0,s.rd)("/api/auth/refresh",{method:"POST",credentials:"include"});return(0,s.M8)(e.data.accessToken),e.data.user}function u(e){let{children:t}=e,[r,l]=(0,n.useState)(null),[u,f]=(0,n.useState)(!0);(0,n.useEffect)(()=>{let e=!0;return(async()=>{f(!0);let t=(0,s.hP)();if(!t){e&&(l(null),f(!1));return}try{let r=await d(t);if(!e)return;l(r)}catch(t){try{let t=await c();e&&l(t)}catch(t){o(null),e&&l(null)}}finally{e&&f(!1)}})(),()=>{e=!1}},[]);let m=async e=>{let t=e.email.trim().toLowerCase(),r=await (0,s.rd)("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,email:t})});return o(r.data.accessToken),(0,s.M8)(r.data.accessToken),l(r.data.user),r.data.user},h=async()=>{await fetch("/api/auth/logout",{method:"POST"}),(0,s.M8)(null),l(null)},p=(0,n.useCallback)(async()=>{let e=(0,s.hP)();if(!e)return null;try{let t=await d(e);return l(t),t}catch(e){return l(null),null}},[]),v=(0,n.useMemo)(()=>({user:r,isLoading:u,signIn:m,signOut:h,refreshUser:p}),[r,u,p]);return(0,a.jsx)(i.Provider,{value:v,children:t})}function f(){let e=(0,n.useContext)(i);if(!e)throw Error("useAuth deve ser usado dentro de AuthProvider");return e}},23340:function(e,t,r){"use strict";r.d(t,{pm:function(){return f}});var a=r(2265);let n=0,s=new Map,i=e=>{if(s.has(e))return;let t=setTimeout(()=>{s.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);s.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?i(r):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],d={toasts:[]};function c(e){d=l(d,e),o.forEach(e=>{e(d)})}function u(e){let{...t}=e,r=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:r});return c({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||a()}}}),{id:r,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function f(){let[e,t]=a.useState(d);return a.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},94076:function(e,t,r){"use strict";r.d(t,{M8:function(){return s},hP:function(){return n},rd:function(){return i}});let a="barberflow_access_token";function n(){return window.localStorage.getItem(a)}function s(e){e?window.localStorage.setItem(a,e):window.localStorage.removeItem(a)}async function i(e){var t,r;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=new Headers(a.headers),i=n();i&&s.set("Authorization","Bearer ".concat(i));let l=await fetch(e,{...a,headers:s,credentials:null!==(t=a.credentials)&&void 0!==t?t:"omit"});if(!l.ok){if((l.headers.get("content-type")||"").includes("application/json"))try{let e=(r=await l.json())&&"object"==typeof r?"string"==typeof r.error&&r.error.trim()?r.error.trim():"string"==typeof r.message&&r.message.trim()?r.message.trim():"string"==typeof r.detail&&r.detail.trim()?r.detail.trim():null:null;throw Error(e||l.statusText||"Falha na requisi\xe7\xe3o.")}catch(e){if(e instanceof Error&&e.message)throw e}throw Error((await l.text()).trim()||l.statusText||"Falha na requisi\xe7\xe3o.")}return l.json()}},93448:function(e,t,r){"use strict";r.d(t,{Ls:function(){return i},cn:function(){return s},lV:function(){return o},xG:function(){return l}});var a=r(61994),n=r(53335);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,a.W)(t))}function i(e){return e?e.toLowerCase().split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "):""}function l(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)}function o(e){return e?e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").replace(/-{2,}/g,"-"):""}}},function(e){e.O(0,[6137,7347,8658,359,2971,2117,1744],function(){return e(e.s=91760)}),_N_E=e.O()}]);
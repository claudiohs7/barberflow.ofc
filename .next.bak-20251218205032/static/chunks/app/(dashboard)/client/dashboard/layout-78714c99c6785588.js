(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7110],{60412:function(e,t,n){Promise.resolve().then(n.bind(n,7218))},82422:function(e,t,n){"use strict";n.d(t,{T:function(){return a}});var r=n(57437);function a(e){return(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[(0,r.jsx)("circle",{cx:"6",cy:"6",r:"3"}),(0,r.jsx)("path",{d:"M8.12 8.12 12 12"}),(0,r.jsx)("path",{d:"M20 4 8.12 15.88"}),(0,r.jsx)("circle",{cx:"6",cy:"18",r:"3"}),(0,r.jsx)("path",{d:"M14.88 15.88 20 20"})]})}},7218:function(e,t,n){"use strict";n.d(t,{ClientNav:function(){return f}});var r=n(57437),a=n(27648),s=n(96246),o=n(12381),i=n(32060),l=n(82422),d=n(71245),c=n(99376),u=n(23340);function f(){var e;let{signOut:t}=(0,d.a)(),{user:n}=(0,d.a)(),f=(0,c.useRouter)(),{toast:m}=(0,u.pm)();return(0,r.jsx)("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,r.jsxs)("div",{className:"container flex h-14 items-center",children:[(0,r.jsx)("div",{className:"mr-4 flex items-center",children:(0,r.jsxs)(a.default,{href:"/client/dashboard",className:"mr-6 flex items-center space-x-2",children:[(0,r.jsx)(l.T,{className:"h-6 w-6 text-primary"}),(0,r.jsx)("span",{className:"font-bold",children:"BarberFlow"})]})}),(0,r.jsx)("div",{className:"flex flex-1 items-center justify-end space-x-4",children:(0,r.jsxs)(i.h_,{children:[(0,r.jsx)(i.$F,{asChild:!0,children:(0,r.jsx)(o.z,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:(0,r.jsx)(s.Avatar,{className:"h-8 w-8",children:(0,r.jsx)(s.AvatarFallback,{children:(null==n?void 0:null===(e=n.name)||void 0===e?void 0:e.charAt(0))||"C"})})})}),(0,r.jsxs)(i.AW,{className:"w-56",align:"end",forceMount:!0,children:[(0,r.jsx)(i.Ju,{className:"font-normal",children:(0,r.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,r.jsx)("p",{className:"text-sm font-medium leading-none",children:(null==n?void 0:n.displayName)||"Cliente"}),(0,r.jsx)("p",{className:"text-xs leading-none text-muted-foreground",children:null==n?void 0:n.email})]})}),(0,r.jsx)(i.VD,{}),(0,r.jsx)(i.Xi,{asChild:!0,children:(0,r.jsx)(a.default,{href:"/client/dashboard/my-appointments",children:"Meus Agendamentos"})}),(0,r.jsx)(i.Xi,{asChild:!0,children:(0,r.jsx)(a.default,{href:"/client/dashboard/settings",children:"Configura\xe7\xf5es"})}),(0,r.jsx)(i.VD,{}),(0,r.jsx)(i.Xi,{onClick:()=>{t().then(()=>{try{localStorage.removeItem("impersonatedBarbershopId")}catch(e){console.warn("Could not access localStorage. Impersonation state may persist.")}m({title:"Logout bem-sucedido!",description:"Voc\xea foi desconectado com seguran\xe7a."}),f.push("/auth/client/login")}).catch(e=>{m({variant:"destructive",title:"Erro ao Sair",description:"N\xe3o foi poss\xedvel fazer logout. Tente novamente."})})},children:"Sair"})]})]})})]})})}},96246:function(e,t,n){"use strict";n.d(t,{Avatar:function(){return i},AvatarFallback:function(){return d},AvatarImage:function(){return l}});var r=n(57437),a=n(2265),s=n(70650),o=n(93448);let i=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.fC,{ref:t,className:(0,o.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",n),...a})});i.displayName=s.fC.displayName;let l=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.Ee,{ref:t,className:(0,o.cn)("aspect-square h-full w-full",n),...a})});l.displayName=s.Ee.displayName;let d=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.NY,{ref:t,className:(0,o.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",n),...a})});d.displayName=s.NY.displayName},12381:function(e,t,n){"use strict";n.d(t,{d:function(){return l},z:function(){return d}});var r=n(57437),a=n(2265),s=n(98482),o=n(90535),i=n(93448);let l=(0,o.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:n,variant:a,size:o,asChild:d=!1,...c}=e,u=d?s.g7:"button";return(0,r.jsx)(u,{className:(0,i.cn)(l({variant:a,size:o,className:n})),ref:t,...c})});d.displayName="Button"},32060:function(e,t,n){"use strict";n.d(t,{$F:function(){return u},AW:function(){return m},Ju:function(){return h},Qk:function(){return f},VD:function(){return v},Xi:function(){return p},h_:function(){return c}});var r=n(57437),a=n(2265),s=n(28119),o=n(76848),i=n(59559),l=n(78084),d=n(93448);let c=s.fC,u=s.xz,f=s.ZA;s.Uv,s.Tr,s.Ee,a.forwardRef((e,t)=>{let{className:n,inset:a,children:i,...l}=e;return(0,r.jsxs)(s.fF,{ref:t,className:(0,d.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",a&&"pl-8",n),...l,children:[i,(0,r.jsx)(o.Z,{className:"ml-auto"})]})}).displayName=s.fF.displayName,a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.tu,{ref:t,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...a})}).displayName=s.tu.displayName;let m=a.forwardRef((e,t)=>{let{className:n,sideOffset:a=4,...o}=e;return(0,r.jsx)(s.Uv,{children:(0,r.jsx)(s.VY,{ref:t,sideOffset:a,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...o})})});m.displayName=s.VY.displayName;let p=a.forwardRef((e,t)=>{let{className:n,inset:a,...o}=e;return(0,r.jsx)(s.ck,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",a&&"pl-8",n),...o})});p.displayName=s.ck.displayName,a.forwardRef((e,t)=>{let{className:n,children:a,checked:o,...l}=e;return(0,r.jsxs)(s.oC,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),checked:o,...l,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(s.wU,{children:(0,r.jsx)(i.Z,{className:"h-4 w-4"})})}),a]})}).displayName=s.oC.displayName,a.forwardRef((e,t)=>{let{className:n,children:a,...o}=e;return(0,r.jsxs)(s.Rk,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...o,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(s.wU,{children:(0,r.jsx)(l.Z,{className:"h-2 w-2 fill-current"})})}),a]})}).displayName=s.Rk.displayName;let h=a.forwardRef((e,t)=>{let{className:n,inset:a,...o}=e;return(0,r.jsx)(s.__,{ref:t,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",a&&"pl-8",n),...o})});h.displayName=s.__.displayName;let v=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",n),...a})});v.displayName=s.Z0.displayName},71245:function(e,t,n){"use strict";n.d(t,{AuthProvider:function(){return u},a:function(){return f}});var r=n(57437),a=n(2265),s=n(94076);let o=(0,a.createContext)(void 0),i="barberflow_access_token";function l(e){e?window.localStorage.setItem(i,e):window.localStorage.removeItem(i)}async function d(e){return(await (0,s.rd)("/api/auth/me",{credentials:"omit",headers:{Authorization:"Bearer ".concat(e)}})).data}async function c(){let e=await (0,s.rd)("/api/auth/refresh",{method:"POST",credentials:"include"});return(0,s.M8)(e.data.accessToken),e.data.user}function u(e){let{children:t}=e,[n,i]=(0,a.useState)(null),[u,f]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let e=!0;return(async()=>{f(!0);let t=(0,s.hP)();if(!t){e&&(i(null),f(!1));return}try{let n=await d(t);if(!e)return;i(n)}catch(t){try{let t=await c();e&&i(t)}catch(t){l(null),e&&i(null)}}finally{e&&f(!1)}})(),()=>{e=!1}},[]);let m=async e=>{let t=e.email.trim().toLowerCase(),n=await (0,s.rd)("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,email:t})});return l(n.data.accessToken),(0,s.M8)(n.data.accessToken),i(n.data.user),n.data.user},p=async()=>{await fetch("/api/auth/logout",{method:"POST"}),(0,s.M8)(null),i(null)},h=(0,a.useCallback)(async()=>{let e=(0,s.hP)();if(!e)return null;try{let t=await d(e);return i(t),t}catch(e){return i(null),null}},[]),v=(0,a.useMemo)(()=>({user:n,isLoading:u,signIn:m,signOut:p,refreshUser:h}),[n,u,h]);return(0,r.jsx)(o.Provider,{value:v,children:t})}function f(){let e=(0,a.useContext)(o);if(!e)throw Error("useAuth deve ser usado dentro de AuthProvider");return e}},23340:function(e,t,n){"use strict";n.d(t,{pm:function(){return f}});var r=n(2265);let a=0,s=new Map,o=e=>{if(s.has(e))return;let t=setTimeout(()=>{s.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);s.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:n}=t;return n?o(n):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===n||void 0===n?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],d={toasts:[]};function c(e){d=i(d,e),l.forEach(e=>{e(d)})}function u(e){let{...t}=e,n=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:n});return c({type:"ADD_TOAST",toast:{...t,id:n,open:!0,onOpenChange:e=>{e||r()}}}),{id:n,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:n}})}}function f(){let[e,t]=r.useState(d);return r.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},94076:function(e,t,n){"use strict";n.d(t,{M8:function(){return s},hP:function(){return a},rd:function(){return o}});let r="barberflow_access_token";function a(){return window.localStorage.getItem(r)}function s(e){e?window.localStorage.setItem(r,e):window.localStorage.removeItem(r)}async function o(e){var t,n;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=new Headers(r.headers),o=a();o&&s.set("Authorization","Bearer ".concat(o));let i=await fetch(e,{...r,headers:s,credentials:null!==(t=r.credentials)&&void 0!==t?t:"omit"});if(!i.ok){if((i.headers.get("content-type")||"").includes("application/json"))try{let e=(n=await i.json())&&"object"==typeof n?"string"==typeof n.error&&n.error.trim()?n.error.trim():"string"==typeof n.message&&n.message.trim()?n.message.trim():"string"==typeof n.detail&&n.detail.trim()?n.detail.trim():null:null;throw Error(e||i.statusText||"Falha na requisi\xe7\xe3o.")}catch(e){if(e instanceof Error&&e.message)throw e}throw Error((await i.text()).trim()||i.statusText||"Falha na requisi\xe7\xe3o.")}return i.json()}},93448:function(e,t,n){"use strict";n.d(t,{Ls:function(){return o},cn:function(){return s},lV:function(){return l},xG:function(){return i}});var r=n(61994),a=n(53335);function s(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,a.m6)((0,r.W)(t))}function o(e){return e?e.toLowerCase().split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "):""}function i(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)}function l(e){return e?e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").replace(/-{2,}/g,"-"):""}},71599:function(e,t,n){"use strict";n.d(t,{z:function(){return o}});var r=n(2265),a=n(98575),s=n(61188),o=e=>{var t,n;let o,l;let{present:d,children:c}=e,u=function(e){var t,n;let[a,o]=r.useState(),l=r.useRef({}),d=r.useRef(e),c=r.useRef("none"),[u,f]=(t=e?"mounted":"unmounted",n={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},r.useReducer((e,t)=>{let r=n[e][t];return null!=r?r:e},t));return r.useEffect(()=>{let e=i(l.current);c.current="mounted"===u?e:"none"},[u]),(0,s.b)(()=>{let t=l.current,n=d.current;if(n!==e){let r=c.current,a=i(t);e?f("MOUNT"):"none"===a||(null==t?void 0:t.display)==="none"?f("UNMOUNT"):n&&r!==a?f("ANIMATION_OUT"):f("UNMOUNT"),d.current=e}},[e,f]),(0,s.b)(()=>{if(a){var e;let t;let n=null!==(e=a.ownerDocument.defaultView)&&void 0!==e?e:window,r=e=>{let r=i(l.current).includes(e.animationName);if(e.target===a&&r&&(f("ANIMATION_END"),!d.current)){let e=a.style.animationFillMode;a.style.animationFillMode="forwards",t=n.setTimeout(()=>{"forwards"===a.style.animationFillMode&&(a.style.animationFillMode=e)})}},s=e=>{e.target===a&&(c.current=i(l.current))};return a.addEventListener("animationstart",s),a.addEventListener("animationcancel",r),a.addEventListener("animationend",r),()=>{n.clearTimeout(t),a.removeEventListener("animationstart",s),a.removeEventListener("animationcancel",r),a.removeEventListener("animationend",r)}}f("ANIMATION_END")},[a,f]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:r.useCallback(e=>{e&&(l.current=getComputedStyle(e)),o(e)},[])}}(d),f="function"==typeof c?c({present:u.isPresent}):r.Children.only(c),m=(0,a.e)(u.ref,(o=null===(t=Object.getOwnPropertyDescriptor(f.props,"ref"))||void 0===t?void 0:t.get)&&"isReactWarning"in o&&o.isReactWarning?f.ref:(o=null===(n=Object.getOwnPropertyDescriptor(f,"ref"))||void 0===n?void 0:n.get)&&"isReactWarning"in o&&o.isReactWarning?f.props.ref:f.props.ref||f.ref);return"function"==typeof c||u.isPresent?r.cloneElement(f,{ref:m}):null};function i(e){return(null==e?void 0:e.animationName)||"none"}o.displayName="Presence"}},function(e){e.O(0,[6137,1906,9049,7347,6008,1864,2971,2117,1744],function(){return e(e.s=60412)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7446],{91987:function(e,t,r){Promise.resolve().then(r.bind(r,65854))},65854:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return E}});var a=r(57437),n=r(2265),l=r(79820),s=r(40977),o=r(56940),i=r(97059),d=r(31699),c=r(31004),u=r(54585),m=r(79282);let f=(0,r(96471).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);var h=r(54734),p=r(14452),x=r(80659),v=r(16994),g=r(93448),b=r(12381),j=r(96246),y=r(63070),w=r(27742),N=r(56942),k=r(7641),C=r(95775),_=r(13993),S=r(26811),D=r(27648),I=r(91934),L=r(23340),Z=r(71245),M=r(94076);let A={appointments:{label:"Agendamentos",color:"hsl(var(--primary))"}};function E(){let{user:e}=(0,Z.a)(),{barbershopId:t,isLoading:r}=(0,S.Y)(),{toast:E}=(0,L.pm)(),[R,T]=(0,n.useState)(!1),[O,z]=(0,n.useState)(0),[F,P]=(0,n.useState)({from:(0,y.N)(new Date),to:(0,w.V)(new Date)}),[U,V]=(0,n.useState)(null),[Y,W]=(0,n.useState)([]),[B,K]=(0,n.useState)([]),[q,Q]=(0,n.useState)([]),[H,G]=(0,n.useState)([]),[J,$]=(0,n.useState)(!0),X=(0,n.useCallback)(async()=>{if(!t){V(null),W([]),K([]),Q([]),G([]),$(!1);return}$(!0);try{var e,r,a,n,l,s;let[o,i,d,c,u]=await Promise.all([(0,M.rd)("/api/barbershops/".concat(encodeURIComponent(t))),(0,M.rd)("/api/barbers?barbershopId=".concat(encodeURIComponent(t))),(0,M.rd)("/api/services?barbershopId=".concat(encodeURIComponent(t))),(0,M.rd)("/api/expenses?barbershopId=".concat(encodeURIComponent(t))),(0,M.rd)("/api/appointments?barbershopId=".concat(encodeURIComponent(t)))]);V(null!==(r=o.data)&&void 0!==r?r:null),W(null!==(a=i.data)&&void 0!==a?a:[]),K(null!==(n=d.data)&&void 0!==n?n:[]),G(null!==(l=null===(e=c.data)||void 0===e?void 0:e.map(e=>({...e,date:new Date(e.date)})))&&void 0!==l?l:[]),Q((null!==(s=u.data)&&void 0!==s?s:[]).map(e=>({...e,startTime:new Date(e.startTime),endTime:new Date(e.endTime)})))}catch(e){E({variant:"destructive",title:"Erro ao carregar o dashboard",description:e.message||"N\xe3o foi poss\xedvel carregar os dados da barbearia."})}finally{$(!1)}},[t,E]);(0,n.useEffect)(()=>{X()},[X]),null==e||e.email;let ee=(0,n.useMemo)(()=>{if(!q)return[];if(!F||!F.from)return q;let e=(0,N.b)(F.from),t=F.to?(0,k.i)(F.to):(0,k.i)(F.from);return q.filter(r=>(0,C._)(r.startTime,{start:e,end:t}))},[q,F]),et=(0,n.useMemo)(()=>ee&&B?ee.filter(e=>"completed"===e.status||"confirmed"===e.status).reduce((e,t)=>e+B.filter(e=>t.serviceIds.includes(e.id)).reduce((e,t)=>e+t.price,0),0):0,[ee,B]),er=(0,n.useMemo)(()=>{if(!H)return 0;if(!F||!F.from)return H.reduce((e,t)=>e+t.amount,0);let e=(0,N.b)(F.from),t=F.to?(0,k.i)(F.to):(0,k.i)(F.from);return H.filter(r=>r.date&&(0,C._)(r.date,{start:e,end:t})).reduce((e,t)=>e+t.amount,0)},[H,F]),ea=(0,n.useMemo)(()=>et-er,[et,er]),en=(0,n.useMemo)(()=>ee?ee.length:0,[ee]),el=(0,n.useMemo)(()=>{let e=["Dom","Seg","Ter","Qua","Qui","Sex","S\xe1b"].map(e=>({name:e,appointments:0}));return ee&&ee.forEach(t=>{let r=(0,_.w)(t.startTime);e[r]&&e[r].appointments++}),e},[ee]),es=(0,n.useMemo)(()=>[{title:"Faturamento no Per\xedodo",value:(0,g.xG)(et),icon:u.Z,color:"text-green-500",bgColor:"bg-green-500/10",href:void 0},{title:"Despesas no Per\xedodo",value:(0,g.xG)(er),icon:m.Z,color:"text-red-500",bgColor:"bg-red-500/10",href:"/admin/dashboard/expenses"},{title:"Lucro no Per\xedodo",value:(0,g.xG)(ea),icon:f,color:ea>=0?"text-blue-500":"text-red-500",bgColor:ea>=0?"bg-blue-500/10":"bg-red-500/10",href:void 0},{title:"Agendamentos no Per\xedodo",value:en.toString(),icon:h.Z,color:"text-purple-500",bgColor:"bg-purple-500/10",href:"/admin/dashboard/schedule"}],[et,er,ea,en]),eo=(0,n.useMemo)(()=>{if(!ee||!Y||!B)return[];let e=new Map;for(let t of ee){let r=e.get(t.barberId)||{total:0,breakdown:{}};for(let e of(r.total+=t.serviceIds.length,t.serviceIds)){let t=B.find(t=>t.id===e);t&&(r.breakdown[t.name]=(r.breakdown[t.name]||0)+1)}e.set(t.barberId,r)}return Y.map(t=>{let r=e.get(t.id);return{barberId:t.id,barberName:t.name,barberAvatar:t.avatarUrl,totalServices:(null==r?void 0:r.total)||0,serviceBreakdown:(null==r?void 0:r.breakdown)||{}}}).sort((e,t)=>t.totalServices-e.totalServices)},[ee,Y,B]),[ei,ed]=(0,n.useState)("");(0,n.useEffect)(()=>{let e=((null==U?void 0:U.name)?(0,g.lV)(U.name):"")||(null==U?void 0:U.id);if(e){let t="/agendar/".concat(e),r=window.location.origin;ed(r?"".concat(r).concat(t):t)}else ed("")},[null==U?void 0:U.id,null==U?void 0:U.name]);let ec=e=>{navigator.clipboard.writeText(e).then(()=>{E({title:"Copiado!",description:"O texto foi copiado para a \xe1rea de transfer\xeancia."})}).catch(e=>{E({variant:"destructive",title:"Erro ao Copiar",description:"N\xe3o foi poss\xedvel copiar."})})};return r||J?(0,a.jsx)("div",{className:"p-6",children:"Carregando dashboard..."}):(null==U||U.plan,(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold font-headline",children:["Dashboard da ",null==U?void 0:U.name]}),(0,a.jsx)(I.D,{date:F,onDateChange:P,className:"mt-4 sm:mt-0"})]}),(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:es.map((e,t)=>(0,a.jsxs)(l.Zb,{className:"flex flex-col p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:(0,g.cn)("flex items-center justify-center h-12 w-12 rounded-lg",e.bgColor),children:(0,a.jsx)(e.icon,{className:(0,g.cn)("h-6 w-6",e.color)})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(l.SZ,{children:e.title}),(0,a.jsx)(l.ll,{className:"text-2xl font-bold",children:e.value})]})]}),e.href&&(0,a.jsx)(l.eW,{className:"p-0 pt-4 mt-auto",children:(0,a.jsx)(b.z,{asChild:!0,variant:"link",className:"p-0 h-auto text-xs text-muted-foreground",children:(0,a.jsx)(D.default,{href:e.href,children:"Ver tudo"})})})]},t))}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(l.Zb,{children:[(0,a.jsx)(l.Ol,{children:(0,a.jsx)(l.ll,{className:"text-base font-medium",children:"Link P\xfablico para Agendamentos"})}),(0,a.jsxs)(l.aY,{className:"p-4 pt-0 space-y-2",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Use o link abaixo para divulgar sua p\xe1gina de agendamentos."}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-2 p-2 rounded-md bg-muted/50 border",children:[(0,a.jsx)("span",{className:"font-mono text-sm text-foreground truncate flex-1",children:ei}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(b.z,{asChild:!0,size:"sm",className:"shrink-0",children:(0,a.jsxs)(D.default,{href:ei,target:"_blank",children:[(0,a.jsx)(p.Z,{className:"mr-2 h-4 w-4"}),"Abrir"]})}),(0,a.jsxs)(b.z,{onClick:()=>ec(ei),size:"sm",className:"shrink-0",children:[(0,a.jsx)(x.Z,{className:"mr-2 h-4 w-4"}),"Copiar"]})]})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsxs)(l.Zb,{children:[(0,a.jsxs)(l.Ol,{children:[(0,a.jsx)(l.ll,{children:"Agendamentos da Semana"}),(0,a.jsx)(l.SZ,{children:"Um resumo dos agendamentos da sua barbearia para o per\xedodo selecionado."})]}),(0,a.jsx)(l.aY,{children:(0,a.jsx)(c.BO,{config:A,className:"h-[350px] w-full",children:(0,a.jsxs)(s.v,{accessibilityLayer:!0,data:el,margin:{left:12,right:12},children:[(0,a.jsx)(o.q,{vertical:!1}),(0,a.jsx)(i.K,{dataKey:"name",tickLine:!1,axisLine:!1,tickMargin:8,tickFormatter:e=>e.slice(0,3)}),(0,a.jsx)(c.h7,{cursor:!1,content:(0,a.jsx)(c.dg,{indicator:"dot"})}),(0,a.jsx)(d.$,{dataKey:"appointments",fill:"var(--color-appointments)",radius:4})]})})})]})}),(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsxs)(l.Zb,{className:"h-full",children:[(0,a.jsxs)(l.Ol,{children:[(0,a.jsxs)(l.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(v.Z,{className:"h-5 w-5"})," Desempenho dos Barbeiros"]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Desempenho no per\xedodo selecionado"})]}),(0,a.jsx)(l.aY,{className:"space-y-4",children:0===eo.length?(0,a.jsx)("div",{className:"text-center text-muted-foreground py-10",children:"Nenhum servi\xe7o registrado neste per\xedodo."}):eo.map(e=>(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsxs)(j.Avatar,{children:[(0,a.jsx)(j.AvatarImage,{src:e.barberAvatar,alt:e.barberName}),(0,a.jsx)(j.AvatarFallback,{children:e.barberName.charAt(0)})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-medium",children:e.barberName}),e.totalServices>0?(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:Object.entries(e.serviceBreakdown).map(e=>{let[t,r]=e;return"".concat(t,": ").concat(r)}).join(", ")}):(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Nenhum servi\xe7o"})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"font-bold text-lg",children:e.totalServices}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"servi\xe7os"})]})]},e.barberId))})]})})]})]})]}))}},96246:function(e,t,r){"use strict";r.d(t,{Avatar:function(){return o},AvatarFallback:function(){return d},AvatarImage:function(){return i}});var a=r(57437),n=r(2265),l=r(70650),s=r(93448);let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(l.fC,{ref:t,className:(0,s.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",r),...n})});o.displayName=l.fC.displayName;let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(l.Ee,{ref:t,className:(0,s.cn)("aspect-square h-full w-full",r),...n})});i.displayName=l.Ee.displayName;let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(l.NY,{ref:t,className:(0,s.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",r),...n})});d.displayName=l.NY.displayName},46291:function(e,t,r){"use strict";r.d(t,{f:function(){return f}});var a=r(57437),n=r(2265),l=r(82521),s=r(76848),o=r(19181),i=r(34862),d=r(93448),c=r(12381),u=r(15291),m=r(90641);function f(e){let{className:t,classNames:r,showOutsideDays:f=!0,...h}=e;return(0,a.jsx)(o._W,{locale:i.F,showOutsideDays:f,className:(0,d.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",caption_dropdowns:"flex justify-center gap-2",nav:"space-x-1 flex items-center",nav_button:(0,d.cn)((0,c.d)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,d.cn)((0,c.d)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"text-primary font-semibold",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...r},components:{IconLeft:e=>{let{className:t,...r}=e;return(0,a.jsx)(l.Z,{className:(0,d.cn)("h-4 w-4",t),...r})},IconRight:e=>{let{className:t,...r}=e;return(0,a.jsx)(s.Z,{className:(0,d.cn)("h-4 w-4",t),...r})},Dropdown:e=>{var t;let{value:r,onChange:l,children:s,...o}=e,i=n.Children.toArray(s),d=i.find(e=>e.props.value===r),c=e=>{null==l||l({target:{value:e}})};return(0,a.jsxs)(u.Ph,{value:null==r?void 0:r.toString(),onValueChange:e=>{c(e)},children:[(0,a.jsx)(u.i4,{className:"pr-1.5 focus:ring-0 w-auto",children:(0,a.jsx)(u.ki,{children:null==d?void 0:null===(t=d.props)||void 0===t?void 0:t.children})}),(0,a.jsx)(u.Bw,{position:"popper",children:(0,a.jsx)(m.x,{className:"h-80",children:i.map((e,t)=>{var r,n;return(0,a.jsx)(u.Ql,{value:null!==(n=null===(r=e.props.value)||void 0===r?void 0:r.toString())&&void 0!==n?n:"",children:e.props.children},"".concat(e.props.value,"-").concat(t))})})})]})}},...h})}f.displayName="Calendar"},31004:function(e,t,r){"use strict";r.d(t,{BO:function(){return m},dg:function(){return p},h7:function(){return h}});var a=r(57437),n=r(2265),l=r(47625),s=r(8147),o=r(22190),i=r(93448);let d={light:"",dark:".dark"},c=n.createContext(null);function u(){let e=n.useContext(c);if(!e)throw Error("useChart must be used within a <ChartContainer />");return e}let m=n.forwardRef((e,t)=>{let{id:r,className:s,children:o,config:d,...u}=e,m=n.useId(),h="chart-".concat(r||m.replace(/:/g,""));return(0,a.jsx)(c.Provider,{value:{config:d},children:(0,a.jsxs)("div",{"data-chart":h,ref:t,className:(0,i.cn)("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",s),...u,children:[(0,a.jsx)(f,{id:h,config:d}),(0,a.jsx)(l.h,{children:o})]})})});m.displayName="Chart";let f=e=>{let{id:t,config:r}=e,n=Object.entries(r).filter(e=>{let[,t]=e;return t.theme||t.color});return n.length?(0,a.jsx)("style",{dangerouslySetInnerHTML:{__html:Object.entries(d).map(e=>{let[r,a]=e;return"\n".concat(a," [data-chart=").concat(t,"] {\n").concat(n.map(e=>{var t;let[a,n]=e,l=(null===(t=n.theme)||void 0===t?void 0:t[r])||n.color;return l?"  --color-".concat(a,": ").concat(l,";"):null}).join("\n"),"\n}\n")}).join("\n")}}):null},h=s.u,p=n.forwardRef((e,t)=>{let{active:r,payload:l,className:s,indicator:o="dot",hideLabel:d=!1,hideIndicator:c=!1,label:m,labelFormatter:f,labelClassName:h,formatter:p,color:v,nameKey:g,labelKey:b}=e,{config:j}=u(),y=n.useMemo(()=>{var e;if(d||!(null==l?void 0:l.length))return null;let[t]=l,r="".concat(b||t.dataKey||t.name||"value"),n=x(j,t,r),s=b||"string"!=typeof m?null==n?void 0:n.label:(null===(e=j[m])||void 0===e?void 0:e.label)||m;return f?(0,a.jsx)("div",{className:(0,i.cn)("font-medium",h),children:f(s,l)}):s?(0,a.jsx)("div",{className:(0,i.cn)("font-medium",h),children:s}):null},[m,f,l,d,h,j,b]);if(!r||!(null==l?void 0:l.length))return null;let w=1===l.length&&"dot"!==o;return(0,a.jsxs)("div",{ref:t,className:(0,i.cn)("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",s),children:[w?null:y,(0,a.jsx)("div",{className:"grid gap-1.5",children:l.map((e,t)=>{let r="".concat(g||e.name||e.dataKey||"value"),n=x(j,e,r),l=v||e.payload.fill||e.color;return(0,a.jsx)("div",{className:(0,i.cn)("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground","dot"===o&&"items-center"),children:p&&(null==e?void 0:e.value)!==void 0&&e.name?p(e.value,e.name,e,t,e.payload):(0,a.jsxs)(a.Fragment,{children:[(null==n?void 0:n.icon)?(0,a.jsx)(n.icon,{}):!c&&(0,a.jsx)("div",{className:(0,i.cn)("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":"dot"===o,"w-1":"line"===o,"w-0 border-[1.5px] border-dashed bg-transparent":"dashed"===o,"my-0.5":w&&"dashed"===o}),style:{"--color-bg":l,"--color-border":l}}),(0,a.jsxs)("div",{className:(0,i.cn)("flex flex-1 justify-between leading-none",w?"items-end":"items-center"),children:[(0,a.jsxs)("div",{className:"grid gap-1.5",children:[w?y:null,(0,a.jsx)("span",{className:"text-muted-foreground",children:(null==n?void 0:n.label)||e.name})]}),e.value&&(0,a.jsx)("span",{className:"font-mono font-medium tabular-nums text-foreground",children:e.value.toLocaleString()})]})]})},e.dataKey)})})]})});function x(e,t,r){if("object"!=typeof t||null===t)return;let a="payload"in t&&"object"==typeof t.payload&&null!==t.payload?t.payload:void 0,n=r;return r in t&&"string"==typeof t[r]?n=t[r]:a&&r in a&&"string"==typeof a[r]&&(n=a[r]),n in e?e[n]:e[r]}p.displayName="ChartTooltip",o.D,n.forwardRef((e,t)=>{let{className:r,hideIcon:n=!1,payload:l,verticalAlign:s="bottom",nameKey:o}=e,{config:d}=u();return(null==l?void 0:l.length)?(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center justify-center gap-4","top"===s?"pb-3":"pt-3",r),children:l.map(e=>{let t="".concat(o||e.dataKey||"value"),r=x(d,e,t);return(0,a.jsxs)("div",{className:(0,i.cn)("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[(null==r?void 0:r.icon)&&!n?(0,a.jsx)(r.icon,{}):(0,a.jsx)("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:e.color}}),null==r?void 0:r.label]},e.value)})}):null}).displayName="ChartLegend"},91934:function(e,t,r){"use strict";r.d(t,{D:function(){return h}});var a=r(57437);r(2265);var n=r(5341),l=r(63070),s=r(27742),o=r(58642),i=r(34862),d=r(13147),c=r(93448),u=r(12381),m=r(46291),f=r(12749);function h(e){let{className:t,date:r,onDateChange:h}=e,p=[{label:"Hoje",range:{from:new Date,to:new Date}},{label:"Ontem",range:{from:(0,n.k)(new Date,1),to:(0,n.k)(new Date,1)}},{label:"\xdaltimos 7 dias",range:{from:(0,n.k)(new Date,6),to:new Date}},{label:"\xdaltimos 30 dias",range:{from:(0,n.k)(new Date,29),to:new Date}},{label:"Este m\xeas",range:{from:(0,l.N)(new Date),to:(0,s.V)(new Date)}},{label:"M\xeas anterior",range:{from:(0,l.N)((0,n.k)(new Date,new Date().getDate())),to:(0,s.V)((0,n.k)(new Date,new Date().getDate()))}},{label:"Total",range:void 0}];return(0,a.jsx)("div",{className:(0,c.cn)("grid gap-2",t),children:(0,a.jsxs)(f.J2,{children:[(0,a.jsx)(f.xo,{asChild:!0,children:(0,a.jsxs)(u.z,{id:"date",variant:"outline",className:(0,c.cn)("w-[300px] justify-start text-left font-normal",!r&&"text-muted-foreground"),children:[(0,a.jsx)(d.Z,{className:"mr-2 h-4 w-4"}),(null==r?void 0:r.from)?r.to?(0,a.jsxs)(a.Fragment,{children:[(0,o.WU)(r.from,"LLL dd, y",{locale:i.F})," -"," ",(0,o.WU)(r.to,"LLL dd, y",{locale:i.F})]}):(0,o.WU)(r.from,"LLL dd, y",{locale:i.F}):(0,a.jsx)("span",{children:"Total"})]})}),(0,a.jsxs)(f.yk,{className:"w-auto p-0 flex",align:"start",children:[(0,a.jsx)("div",{className:"flex flex-col space-y-2 border-r pr-4 py-4 pl-4",children:p.map(e=>(0,a.jsx)(u.z,{variant:"ghost",className:"justify-start",onClick:()=>h(e.range),children:e.label},e.label))}),(0,a.jsx)(m.f,{initialFocus:!0,mode:"range",defaultMonth:null==r?void 0:r.from,selected:r,onSelect:h,numberOfMonths:2})]})]})})}},12749:function(e,t,r){"use strict";r.d(t,{J2:function(){return o},xo:function(){return i},yk:function(){return d}});var a=r(57437),n=r(2265),l=r(51777),s=r(93448);let o=l.fC,i=l.xz,d=n.forwardRef((e,t)=>{let{className:r,align:n="center",sideOffset:o=4,...i}=e;return(0,a.jsx)(l.h_,{children:(0,a.jsx)(l.VY,{ref:t,align:n,sideOffset:o,className:(0,s.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...i})})});d.displayName=l.VY.displayName},26811:function(e,t,r){"use strict";r.d(t,{N:function(){return i},Y:function(){return d}});var a=r(57437),n=r(71245),l=r(94076),s=r(2265);let o=(0,s.createContext)(void 0);function i(e){let{children:t}=e,{user:r,isLoading:i}=(0,n.a)(),[d,c]=(0,s.useState)(null),[u,m]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{let e=!0,t=null;return i?(m(!0),()=>{e=!1}):r?((async()=>{m(!0),t=new AbortController;try{var a,n,s,o,i,d;let u=await (0,l.rd)("/api/barbershops?ownerId=".concat(encodeURIComponent(r.id)),{signal:t.signal});if(!e)return;let m=null!==(i=null===(n=u.data)||void 0===n?void 0:null===(a=n[0])||void 0===a?void 0:a.id)&&void 0!==i?i:null;if(m){c(m);return}let f=await (0,l.rd)("/api/barbershops",{signal:t.signal});if(!e)return;c(null!==(d=null===(o=f.data)||void 0===o?void 0:null===(s=o[0])||void 0===s?void 0:s.id)&&void 0!==d?d:null)}catch(t){if(!e)return;(null==t?void 0:t.name)!=="AbortError"&&(console.warn("Falha ao buscar barbearia (owner e fallback):",t),c(null))}finally{if(!e)return;m(!1)}})(),()=>{e=!1,null==t||t.abort()}):(c(null),m(!1),()=>{e=!1})},[r,i]),(0,a.jsx)(o.Provider,{value:{barbershopId:d,isLoading:u},children:t})}function d(){let e=(0,s.useContext)(o);if(void 0===e)throw Error("useBarbershopId must be used within a BarbershopIdProvider");return e}},70650:function(e,t,r){"use strict";r.d(t,{Ee:function(){return j},NY:function(){return y},fC:function(){return b}});var a=r(2265),n=r(73966),l=r(26606),s=r(61188),o=r(82912),i=r(57437),d="Avatar",[c,u]=(0,n.b)(d),[m,f]=c(d),h=a.forwardRef((e,t)=>{let{__scopeAvatar:r,...n}=e,[l,s]=a.useState("idle");return(0,i.jsx)(m,{scope:r,imageLoadingStatus:l,onImageLoadingStatusChange:s,children:(0,i.jsx)(o.WV.span,{...n,ref:t})})});h.displayName=d;var p="AvatarImage",x=a.forwardRef((e,t)=>{let{__scopeAvatar:r,src:n,onLoadingStatusChange:d=()=>{},...c}=e,u=f(p,r),m=function(e,t){let[r,n]=a.useState("idle");return(0,s.b)(()=>{if(!e){n("error");return}let r=!0,a=new window.Image,l=e=>()=>{r&&n(e)};return n("loading"),a.onload=l("loaded"),a.onerror=l("error"),a.src=e,t&&(a.referrerPolicy=t),()=>{r=!1}},[e,t]),r}(n,c.referrerPolicy),h=(0,l.W)(e=>{d(e),u.onImageLoadingStatusChange(e)});return(0,s.b)(()=>{"idle"!==m&&h(m)},[m,h]),"loaded"===m?(0,i.jsx)(o.WV.img,{...c,ref:t,src:n}):null});x.displayName=p;var v="AvatarFallback",g=a.forwardRef((e,t)=>{let{__scopeAvatar:r,delayMs:n,...l}=e,s=f(v,r),[d,c]=a.useState(void 0===n);return a.useEffect(()=>{if(void 0!==n){let e=window.setTimeout(()=>c(!0),n);return()=>window.clearTimeout(e)}},[n]),d&&"loaded"!==s.imageLoadingStatus?(0,i.jsx)(o.WV.span,{...l,ref:t}):null});g.displayName=v;var b=h,j=x,y=g},7641:function(e,t,r){"use strict";r.d(t,{i:function(){return n}});var a=r(99649);function n(e){let t=(0,a.Q)(e);return t.setHours(23,59,59,999),t}},13993:function(e,t,r){"use strict";r.d(t,{w:function(){return n}});var a=r(99649);function n(e){return(0,a.Q)(e).getDay()}},54734:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(96471).Z)("CalendarCheck",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]])},80659:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(96471).Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},14452:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(96471).Z)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},79282:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(96471).Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]])}},function(e){e.O(0,[6137,1906,9049,7347,6008,2550,8642,926,2915,1546,9335,1756,4744,2971,2117,1744],function(){return e(e.s=91987)}),_N_E=e.O()}]);
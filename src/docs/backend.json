
{
  "entities": {
    "ClientProfile": {
      "title": "Perfil do Cliente",
      "description": "Dados do perfil de um usuário cliente.",
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "Nome completo do cliente."
        },
        "phone": {
          "type": "string",
          "description": "Número de telefone do cliente."
        },
        "email": {
          "type": "string",
          "format": "email",
          "description": "Endereço de e-mail do cliente."
        },
        "favoriteBarbershops": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Uma lista de IDs de barbearias que o cliente favoritou."
        }
      },
      "required": [
        "name",
        "phone",
        "email"
      ]
    },
    "Barbershop": {
      "title": "Barbearia",
      "description": "Representa uma única entidade de barbearia no sistema.",
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "Nome fantasia da barbearia."
        },
        "legalName": {
          "type": "string",
          "description": "Razão Social ou nome do proprietário."
        },
        "cpfCnpj": {
          "type": "string",
          "description": "CPF ou CNPJ do proprietário/empresa."
        },
        "email": {
          "type": "string",
          "format": "email",
          "description": "E-mail de contato e login do proprietário."
        },
        "phone": {
          "type": "string",
          "description": "Telefone principal de contato da barbearia (WhatsApp)."
        },
        "address": {
          "type": "object",
          "properties": {
            "street": { "type": "string" },
            "number": { "type": "string" },
            "complement": { "type": "string" },
            "neighborhood": { "type": "string" },
            "city": { "type": "string" },
            "state": { "type": "string" },
            "cep": { "type": "string" }
          },
          "required": ["street", "number", "neighborhood", "city", "state", "cep"]
        },
        "ownerId": {
          "type": "string",
          "description": "UID do Firebase Auth do proprietário da barbearia."
        },
        "plan": {
          "type": "string",
          "enum": ["Básico", "Premium"],
          "description": "O plano de assinatura atual da barbearia."
        },
        "status": {
            "type": "string",
            "enum": ["Ativa", "Inativa"],
            "description": "Status da assinatura da barbearia."
        },
        "expiryDate": {
            "type": "string",
            "format": "date-time",
            "description": "Data de expiração da assinatura ou do período de teste."
        },
        "operatingHours": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "day": {"type": "string"},
              "open": {"type": "string"},
              "close": {"type": "string"}
            }
          }
        },
        "bitsafiraInstanceId": {
            "type": "string",
            "description": "ID da instância de conexão com a API BitSafira."
        },
        "whatsappStatus": {
            "type": "string",
            "enum": ["DISCONNECTED", "LOADING_QR", "CONNECTED"],
            "description": "Status da conexão com o WhatsApp."
        },
        "qrCodeBase64": {
            "type": "string",
            "description": "A imagem do QR Code em Base64 para conexão do WhatsApp."
        }
      },
      "required": ["name", "email", "ownerId", "address", "phone"]
    },
    "Barber": {
        "title": "Barbeiro",
        "description": "Perfil de um barbeiro que trabalha em uma barbearia.",
        "type": "object",
        "properties": {
            "name": {"type": "string"},
            "phone": {"type": "string"},
            "avatarUrl": {"type": "string", "format": "uri"},
            "schedule": {
                "type": "array",
                "items": {
                    "type": "object",
                    "properties": {
                        "day": {"type": "string"},
                        "start": {"type": "string"},
                        "end": {"type": "string"},
                        "lunchTime": {
                            "type": "object",
                            "properties": {
                                "start": {"type": "string"},
                                "end": {"type": "string"}
                            }
                        }
                    }
                }
            },
            "services": {
                "type": "array",
                "items": {
                    "type": "object",
                    "properties": {
                        "serviceId": {"type": "string"}
                    }
                }
            }
        },
        "required": ["name"]
    },
    "Service": {
        "title": "Serviço",
        "description": "Um serviço oferecido pela barbearia.",
        "type": "object",
        "properties": {
            "name": {"type": "string"},
            "duration": {"type": "number"},
            "price": {"type": "number"}
        },
        "required": ["name", "duration", "price"]
    },
    "Appointment": {
        "title": "Agendamento",
        "description": "Um horário agendado por um cliente.",
        "type": "object",
        "properties": {
            "clientId": {"type": "string"},
            "clientName": {"type": "string"},
            "clientPhone": {"type": "string"},
            "barberId": {"type": "string"},
            "serviceIds": {"type": "array", "items": {"type": "string"}},
            "startTime": {"type": "string", "format": "date-time"},
            "endTime": {"type": "string", "format": "date-time"},
            "status": {"type": "string", "enum": ["confirmed", "cancelled", "completed"]},
            "totalDuration": {"type": "number"}
        },
        "required": ["barberId", "serviceIds", "startTime", "endTime", "status"]
    },
    "Expense": {
        "title": "Despesa",
        "description": "Uma despesa registrada pela barbearia.",
        "type": "object",
        "properties": {
            "description": {"type": "string"},
            "category": {"type": "string"},
            "type": {"type": "string", "enum": ["Fixa", "Variável"]},
            "amount": {"type": "number"},
            "date": {"type": "string", "format": "date-time"}
        },
        "required": ["description", "category", "type", "amount", "date"]
    },
    "SystemSettings": {
      "title": "Configurações do Sistema",
      "description": "Configurações globais do sistema, como chaves de API e webhooks.",
      "type": "object",
      "properties": {}
    },
    "BitSafiraSettings": {
        "title": "Configurações da BitSafira",
        "description": "Credenciais e URLs para integração com a API da BitSafira.",
        "type": "object",
        "properties": {
            "apiToken": {"type": "string"},
            "productionUrl": {"type": "string", "format": "uri"}
        }
    },
    "Webhook": {
        "title": "Webhook",
        "description": "Configuração de um webhook para integrações.",
        "type": "object",
        "properties": {
            "name": {"type": "string"},
            "url": {"type": "string", "format": "uri"},
            "events": {
                "type": "array", 
                "items": {"type": "string"}
            }
        },
        "required": ["name", "url", "events"]
    },
    "SupportTicket": {
      "title": "Ticket de Suporte",
      "description": "Representa um ticket de suporte aberto por um usuário.",
      "type": "object",
      "properties": {
        "title": {"type": "string"},
        "description": {"type": "string"},
        "status": {"type": "string", "enum": ["open", "in_progress", "closed"]},
        "priority": {"type": "string", "enum": ["low", "medium", "high", "urgent"]},
        "category": {"type": "string", "enum": ["technical", "billing", "feature", "other"]},
        "createdBy": {"type": "string"},
        "createdAt": {"type": "string", "format": "date-time"},
        "updatedAt": {"type": "string", "format": "date-time"},
        "assignedTo": {"type": "string"},
        "barbershopId": {"type": "string"},
        "clientEmail": {"type": "string", "format": "email"},
        "clientName": {"type": "string"}
      },
      "required": ["title", "description", "status", "priority", "category", "createdBy", "createdAt", "updatedAt", "clientEmail", "clientName"]
    },
    "SupportTicketResponse": {
      "title": "Resposta de Ticket de Suporte",
      "description": "Uma resposta a um ticket de suporte existente.",
      "type": "object",
      "properties": {
        "message": {"type": "string"},
        "createdBy": {"type": "string"},
        "createdAt": {"type": "string", "format": "date-time"},
        "isAdmin": {"type": "boolean"}
      },
      "required": ["message", "createdBy", "createdAt", "isAdmin"]
    }
  },
  "auth": {
    "providers": [
      "password"
    ]
  },
  "firestore": {
    "/barbershops/{barbershopId}": {
      "schema": {
        "$ref": "#/entities/Barbershop"
      },
      "description": "Coleção principal que armazena os dados de cada barbearia. O ID do documento é o UID do proprietário."
    },
    "/barbershops/{barbershopId}/clients/{clientId}": {
      "schema": {
        "$ref": "#/entities/ClientProfile"
      },
      "description": "Subcoleção dos clientes que já agendaram ou foram cadastrados em uma barbearia específica."
    },
    "/barbershops/{barbershopId}/barbers/{barberId}": {
      "schema": {
        "$ref": "#/entities/Barber"
      },
      "description": "Subcoleção dos barbeiros que trabalham em uma barbearia específica."
    },
    "/barbershops/{barbershopId}/services/{serviceId}": {
      "schema": {
        "$ref": "#/entities/Service"
      },
      "description": "Subcoleção dos serviços oferecidos por uma barbearia específica."
    },
     "/barbershops/{barbershopId}/appointments/{appointmentId}": {
      "schema": {
        "$ref": "#/entities/Appointment"
      },
      "description": "Subcoleção de todos os agendamentos de uma barbearia específica."
    },
    "/barbershops/{barbershopId}/expenses/{expenseId}": {
      "schema": {
        "$ref": "#/entities/Expense"
      },
      "description": "Subcoleção das despesas de uma barbearia específica."
    },
    "/barbershops/{barbershopId}/webhooks/{webhookId}": {
      "schema": {
        "$ref": "#/entities/Webhook"
      },
      "description": "Subcoleção dos webhooks configurados para uma barbearia específica."
    },
    "/clients/{userId}": {
      "schema": {
        "$ref": "#/entities/ClientProfile"
      },
      "description": "Coleção global de perfis de usuários clientes, onde o ID do documento é o UID do Firebase Auth do cliente."
    },
    "/support_tickets/{ticketId}": {
      "schema": {
        "$ref": "#/entities/SupportTicket"
      },
      "description": "Coleção global de tickets de suporte."
    },
    "/support_tickets/{ticketId}/responses/{responseId}": {
      "schema": {
        "$ref": "#/entities/SupportTicketResponse"
      },
      "description": "Subcoleção das respostas para um ticket de suporte específico."
    },
    "/system_settings/{settingId}": {
        "schema": {
            "$ref": "#/entities/SystemSettings"
        },
        "description": "Coleção para configurações globais do sistema."
    },
    "/bitsafira_settings/credentials": {
        "schema": {
            "$ref": "#/entities/BitSafiraSettings"
        },
        "description": "Configurações globais para a integração com a API da BitSafira."
    }
  }
}
